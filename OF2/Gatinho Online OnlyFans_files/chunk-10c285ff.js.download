(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10c285ff"],{"0463":function(t,e,i){"use strict";i("8d4a")},"053c":function(t,e,i){"use strict";i("188d")},"0cc8":function(t,e,i){},1577:function(t,e,i){"use strict";i("d5ea")},"188d":function(t,e,i){},"204d":function(t,e,i){},"24df":function(t,e,i){},3251:function(t,e,i){},"3f54":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image_editor"},[i("div",{staticClass:"image_editor_holder"},[i("editor-header",{directives:[{name:"show",rawName:"v-show",value:t.showFooter,expression:"showFooter"}],ref:"header",scopedSlots:t._u([{key:"left",fn:function(){return[t.headerComponentLeft?i(t.headerComponentLeft,{tag:"div"}):t._e()]},proxy:!0},{key:"center",fn:function(){return[t.headerComponentCenter?i(t.headerComponentCenter,{tag:"div"}):t._e()]},proxy:!0},{key:"right",fn:function(){return[t.headerComponentRight?i(t.headerComponentRight,{tag:"div"}):t._e()]},proxy:!0}])}),i("editor-main",{ref:"main",attrs:{config:t.$imageEditor.currentFileStage,screen:t.screen,"show-long-tap":t.longTap&&"default"===t.screen||t.longTap&&"deepAr"===t.screen}}),i("editor-footer",{directives:[{name:"show",rawName:"v-show",value:t.showFooter&&t.isImageEditorMounted,expression:"showFooter && isImageEditorMounted"}],ref:"footer",attrs:{screen:t.screen}}),i("question-block")],1)])},n=[],o=(i("8e6e"),i("3b2b"),i("7514"),i("bd86")),s=(i("ac6a"),i("456d"),i("86d6")),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__header",attrs:{id:"imageEditorHeader"}},[i("div",{staticClass:"b-image-editor__header__wrapper justify-content"},[t._t("tools",[i("div",{staticClass:"default right-default"},[t._t("left")],2),i("div",[t._t("center")],2),t.isImageEditorMounted?i("div",{staticClass:"default left-default"},[t._t("right",[i("button",{staticClass:"g-btn m-rounded done",staticStyle:{"margin-right":"9px"},on:{click:t.done}},[t._v(" "+t._s(t.$t("message.button_done"))+" ")])])],2):t._e()])],2)])},c=[],u={name:"ImageEditorHeader",computed:{isImageEditorMounted:function(){return this.$imageEditor.isMounted}},methods:{done:function(){this.$imageEditor.currentFileStage.methods.done()}}},l=u,d=(i("6696"),i("2877")),h=Object(d["a"])(l,a,c,!1,null,"65ee7354",null),p=h.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Crop reset"},on:{click:function(e){return t.resetCrop()}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-crop-reset"})])},f=[],g={name:"CropLeft",methods:{resetCrop:function(){this.$imageEditor.currentFileStage.methods.resetCrop()}}},v=g,y=Object(d["a"])(v,m,f,!1,null,"65340de9",null),b=y.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"g-btn m-rounded rounded",on:{click:t.changeOrientation}},[t._v(" "+t._s(t.title)+" ")])},_=[],S={name:"CropCenter",data:function(){return this.$imageEditor.currentFileStage.cropState},computed:{title:function(){var t=this.cropOrientation;return t[0].toUpperCase()+t.slice(1)}},methods:{changeOrientation:function(){var t=this.$imageEditor.currentFileStage.cropState.cropOrientation;this.$imageEditor.currentFileStage.cropState.cropOrientation="portrait"===t?"landscape":"portrait",this.$imageEditor.currentFileStage.methods.setUpCrop()}}},k=S,C=Object(d["a"])(k,w,_,!1,null,"b3074bfe",null),x=C.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__header__wrapper no-margin-header"},[i("button",{staticClass:"b-image-editor__btn",staticStyle:{"margin-right":"auto"},attrs:{type:"button",title:t.$t("message.close_button")},on:{click:t.close}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),t.isImageEditorMounted?[i("button",{staticClass:"b-image-editor__btn",style:{opacity:t.history.undo.length?1:.6},attrs:{disabled:!t.history.undo.length,title:"Undo"},on:{click:function(e){return t.proceedHistory("undo")}}},["undo"!==t.showDisable?i("span",[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-undo"})]):i("div",[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-loading",href:"#icon-loading"}},[i("svg",{attrs:{viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"white",d:"M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"}})])])])])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:t.history.redo.length?1:.6},attrs:{disabled:!t.history.redo.length,title:"Redo"},on:{click:function(e){return t.proceedHistory("redo")}}},["redo"!==t.showDisable?i("span",[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-undo",staticStyle:{transform:"scaleX(-1)"}})]):i("div",[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-loading",href:"#icon-loading"}},[i("svg",{attrs:{viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"white",d:"M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"}})])])])])])]:t._e()],2)},$=[],E=(i("96cf"),i("3b8d")),j=i("2ef0"),P={name:"DefaultLeftSlot",data:function(){return{showDisable:"none",history:{undo:[],redo:[]}}},computed:{isImageEditorMounted:function(){return this.$imageEditor.isMounted}},mounted:function(){var t=this;this.$imageEditor.events.$on("mounted",(function(){t.history=t.$imageEditor.currentFileStage.history})),this.$imageEditor.currentFileStage.history&&(this.history=this.$imageEditor.currentFileStage.history)},methods:{close:function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.interact(this.$t("message.question_without_saving"),{confirmText:this.$t("message.exit_button")});case 2:e=t.sent,e&&this.$imageEditor.currentFileStage.rejectFile();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),proceedHistory:Object(j["throttle"])((function(t){var e=this;this.showDisable=t,this.$nextTick(Object(E["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$imageEditor.currentFileStage.methods.proceedHistory(t);case 2:e.showDisable="none";case 3:case"end":return i.stop()}}),i)}))))}),250)}},I=P,M=(i("053c"),Object(d["a"])(I,O,$,!1,null,null,null)),A=M.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex"},[t.$imageEditor.isStory?i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Add question"},on:{click:t.addQuestion}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-support"})]):t._e(),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Face beauty"},on:{click:t.openDeepAr}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-beauty"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Stickers"},on:{click:t.openStickers}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[i("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),i("circle",{attrs:{cx:"15.5",cy:"9.5",r:"1.5",fill:"white"}}),i("circle",{attrs:{fill:"white",cx:"8.5",cy:"9.5",r:"1.5"}}),i("path",{attrs:{fill:"white",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm4.41-6.11c-.35-.22-.82-.11-1.03.24-.74 1.17-2 1.87-3.38 1.87s-2.64-.7-3.38-1.88c-.22-.35-.68-.46-1.03-.24-.35.22-.46.68-.24 1.03C8.37 16.54 10.1 17.5 12 17.5s3.63-.97 4.65-2.58c.22-.35.11-.81-.24-1.03z"}})])]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Crop"},on:{click:function(e){return t.changeScreen("crop")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-crop"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Overlay"},on:{click:function(e){return t.changeScreen("overlay")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-overlay"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Text"},on:{click:function(e){return t.changeScreen("text")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text"})]),i("StickersModal",{attrs:{"disable-gifs":t.disableGifs},on:{selectEmoji:t.addSticker,selectGiphy:t.addGif}})],1)},D=[],F={name:"DefaultRightSlot",components:{StickersModal:function(){return i.e("chunk-5caff083").then(i.bind(null,"36e4"))}},data:function(){return{disableGifs:!1}},mounted:function(){var t=this;this.$imageEditor.events.$on("stickerAdded",(function(){t.$root.$emit("bv::hide::modal","StickersModal")})),this.$imageEditor.events.$on("gifAdded",(function(){t.$root.$emit("bv::hide::modal","StickersModal")}))},methods:{changeScreen:function(t){this.$imageEditor.currentFileStage.methods.changeScreen(t)},openStickers:function(){this.disableGifs=this.$imageEditor.currentFileStage.settings.disableGifs,this.$root.$emit("bv::show::modal","StickersModal")},openDeepAr:function(){this.$imageEditor.currentFileStage.methods.startDeepAr()},addSticker:function(t){this.$imageEditor.currentFileStage.methods.addSticker(t)},addGif:function(t){this.$imageEditor.currentFileStage.methods.addGif(t)},addQuestion:function(){var t=this.$imageEditor.currentFileStage.layer.findOne(".QuestionBlock");t?this.$imageEditor.events.$emit("imageEditor::question::focus"):(this.$imageEditor.currentFileStage.methods.addQuestion(),this.$imageEditor.events.$emit("imageEditor::question::focus",{reset:!0}))}}},T=F,N=(i("95c5"),Object(d["a"])(T,R,D,!1,null,null,null)),L=N.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Overlay reset"},on:{click:function(e){return t.resetOverlay()}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-overlay-reset"})])},B=[],V={name:"OverlayLeft",methods:{resetOverlay:function(){this.$imageEditor.currentFileStage.methods.resetOverlay()}}},z=V,U=Object(d["a"])(z,H,B,!1,null,"740202b0",null),q=U.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"g-btn m-rounded rounded m-capitalize",on:{click:t.textBoldSwitch}},[t._v(" "+t._s(t.textBold)+" ")])},G=[],K={name:"TextCenter",data:function(){return this.$imageEditor.currentFileStage.textState},methods:{textBoldSwitch:function(){this.$imageEditor.currentFileStage.methods.textBoldSwitch()}}},X=K,Q=(i("dd8e"),Object(d["a"])(X,W,G,!1,null,"5114158c",null)),Y=Q.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",id:"text_align",title:"Text align"},on:{click:function(e){return t.textAlignSwitch()}}},[i("svg",{directives:[{name:"show",rawName:"v-show",value:"center"===t.textAlign,expression:"textAlign === 'center'"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-align-center"}),i("svg",{directives:[{name:"show",rawName:"v-show",value:"right"===t.textAlign,expression:"textAlign === 'right'"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-align-right"}),i("svg",{directives:[{name:"show",rawName:"v-show",value:"left"===t.textAlign,expression:"textAlign === 'left'"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-align-left"})]),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Text background"},on:{click:function(e){return t.textBackgoundSwitch()}}},[i("svg",{directives:[{name:"show",rawName:"v-show",value:this.textBackground,expression:"this.textBackground"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text-frame-on",attrs:{id:"text_background_svg_on"}}),i("svg",{directives:[{name:"show",rawName:"v-show",value:!this.textBackground,expression:"!this.textBackground"},{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text-frame-off",attrs:{id:"text_background_svg_off"}})])])},Z=[],tt={name:"Text",data:function(){return this.$imageEditor.currentFileStage.textState},methods:{textBackgoundSwitch:function(){this.$imageEditor.currentFileStage.methods.textBackgroundSwitch()},textAlignSwitch:function(){this.$imageEditor.currentFileStage.methods.textAlignSwitch()}}},et=tt,it=Object(d["a"])(et,J,Z,!1,null,"12ff61b4",null),rt=it.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-left_btns"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Cancel deepAr"},on:{click:t.close}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:t.history.undo.length?1:.6},attrs:{disabled:!t.history.undo.length,title:"Reset"},on:{click:t.reset}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-renew"})]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:t.history.undo.length?1:.6},attrs:{disabled:!t.history.undo.length,title:"Undo"},on:{click:function(e){return t.proceedHistory("undo")}}},["undo"!==t.showDisable?i("span",[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-undo"})]):i("div",[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-loading",href:"#icon-loading"}},[i("svg",{attrs:{viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"white",d:"M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"}})])])])])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:t.history.redo.length?1:.6},attrs:{disabled:!t.history.redo.length,title:"Redo"},on:{click:function(e){return t.proceedHistory("redo")}}},["redo"!==t.showDisable?i("span",[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-undo",staticStyle:{transform:"scaleX(-1)"}})]):i("div",[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-loading",href:"#icon-loading"}},[i("svg",{attrs:{viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"white",d:"M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"}})])])])])])])},ot=[],st={name:"DeepArLeft",data:function(){return{showDisable:"none",history:{undo:[],redo:[]}}},mounted:function(){this.history=this.$imageEditor.currentFileStage.historydeepAr},methods:{reset:function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.interact(this.$t("message.are_you_sure"),{title:this.$t("message.confirm_button"),confirmText:this.$t("message.yes"),denyText:this.$t("message.no")});case 2:e=t.sent,e&&(this.$imageEditor.currentFileStage.methods.cancelDeepAr(),this.$imageEditor.currentFileStage.methods.startDeepAr());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),close:function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.interact(this.$t("message.are_you_sure"),{title:this.$t("message.confirm_button"),confirmText:this.$t("message.yes"),denyText:this.$t("message.no")});case 2:e=t.sent,e&&this.$imageEditor.currentFileStage.methods.cancelDeepAr();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),proceedHistory:Object(j["throttle"])((function(t){var e=this;this.showDisable=t,this.$nextTick(Object(E["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$imageEditor.currentFileStage.methods.proceedHistory(t,"deepAr");case 2:e.showDisable="none";case 3:case"end":return i.stop()}}),i)}))))}),250)}},at=st,ct=(i("669f"),Object(d["a"])(at,nt,ot,!1,null,null,null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-left_btns"},[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"makeup"===t.category?1:.6},attrs:{type:"button",title:"Makeup"},on:{click:function(e){return t.changeCategory("makeup")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-makeup"})]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"face"===t.category?1:.6},attrs:{type:"button",title:"Face dimensions"},on:{click:function(e){return t.changeCategory("face")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-face"})])])},dt=[],ht={name:"DeepArLeft",data:function(){return this.$imageEditor.currentFileStage.deepArSettings},methods:{changeCategory:function(t){this.$imageEditor.currentFileStage.deepArSettings.category=t}}},pt=ht,mt=(i("7fbd"),Object(d["a"])(pt,lt,dt,!1,null,null,null)),ft=mt.exports,gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"imageContainer",staticClass:"b-image-editor__image-container",attrs:{id:"imageEditorStage"}},[i("div",{staticClass:"b-image-editor__side-column b-image-editor__side-column_left"},[t.leftComponent?i(t.leftComponent,{tag:"div"}):t._e()],1),i("div",{staticClass:"konva_block main_stage"},[t.showPreloader?i("spinner-loader"):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showPreloader&&!t.showLongTap,expression:"!showPreloader && !showLongTap"}],attrs:{id:"deepArCanvasPlaceholder"}}),i("v-stage",{directives:[{name:"show",rawName:"v-show",value:t.showMainStage&&!t.showPreloader,expression:"showMainStage && !showPreloader"}],ref:"stage",attrs:{config:t.konvaConfig}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLongTap,expression:"showLongTap"}],staticClass:"image-editor-longTap",style:{height:t.config.height+"px",width:t.config.width+"px",position:t.isLongTapLoaded?"static":"absolute",top:"-999999px"}},[i("img",{staticStyle:{"max-width":"100%","max-height":"100%"},style:{width:t.longTapData.width,height:t.longTapData.height},attrs:{src:t.longTapData.src,alt:""},on:{load:t.longTapLoaded}})])],1),i("div",{staticClass:"b-image-editor__side-column b-image-editor__side-column_right"},[t.rightComponent?i(t.rightComponent,{tag:"div"}):t._e()],1)])},vt=[],yt=i("2b0e"),bt=i("7591"),wt=i.n(bt),_t=i("c483"),St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__side-column-holder"},[i("div",{staticClass:"overlay_color copy_color",class:{active_color:"transparent"===t.leftColor},on:{click:function(e){return t.changeLeftOverlayColor("transparent")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),t._l(t.colors,(function(e,r){var n;return"transparent"!==r?i("div",{staticClass:"overlay_color",class:(n={},n["c-"+r]=!0,n.active_color=t.leftColor===r,n),on:{click:function(e){return t.changeLeftOverlayColor(r)}}}):t._e()}))],2)},kt=[],Ct={name:"OverlayLeft",data:function(){return this.$imageEditor.currentFileStage.overlayState},methods:{transparentOverlayColor:function(t){this.$imageEditor.currentFileStage.methods.transparentOverlayColor(t)},changeLeftOverlayColor:function(t){this.leftColor=t,this.$imageEditor.currentFileStage.methods.setOverlayColors()}}},xt=Ct,Ot=Object(d["a"])(xt,St,kt,!1,null,"7228072b",null),$t=Ot.exports,Et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__side-column-holder"},[t._l(t.reverseColors,(function(e,r){var n;return"transparent"!==r?i("div",{staticClass:"overlay_color",class:(n={},n["c-"+r]=!0,n.active_color=t.rightColor===r,n),on:{click:function(e){return t.changeRightOverlayColor(r)}}}):t._e()})),i("div",{staticClass:"overlay_color copy_color",class:{active_color:"transparent"===t.rightColor},on:{click:function(e){return t.changeRightOverlayColor("transparent")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],2)},jt=[],Pt={name:"OverlayRight",data:function(){return this.$imageEditor.currentFileStage.overlayState},computed:{reverseColors:function(){var t=this,e=[],i={};for(var r in this.colors)e.push(r);return e=e.reverse(),e.forEach((function(e){i[e]=t.colors[e]})),i}},methods:{transparentOverlayColor:function(t){this.$imageEditor.currentFileStage.methods.transparentOverlayColor(t)},changeRightOverlayColor:function(t){this.rightColor=t,this.$imageEditor.currentFileStage.methods.setOverlayColors()}}},It=Pt,Mt=Object(d["a"])(It,Et,jt,!1,null,"49d05256",null),At=Mt.exports,Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__side-column-holder"},[i("button",{staticClass:"b-image-editor__btn d-block",attrs:{type:"button",title:"Increase text size"},on:{click:t.increaseTextSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text"})]),i("vue-slider",{attrs:{direction:"btt",height:"256px",width:"5px",min:9,max:36},model:{value:t.sizeModel,callback:function(e){t.sizeModel=e},expression:"sizeModel"}}),i("button",{staticClass:"b-image-editor__btn d-block small_icon",attrs:{type:"button",title:"Decrease text size"},on:{click:t.decreaseTextSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-text"})])],1)},Dt=[],Ft=i("4971b"),Tt=i.n(Ft),Nt=(i("24df"),{name:"TextLeft",components:{VueSlider:Tt.a},data:function(){return this.$imageEditor.currentFileStage.textState},computed:{sizeModel:{get:function(){return this.currentText?this.currentText.fontSize()*this.$imageEditor.currentFileStage.imageConf.ratio:this.defaultTextFontSize},set:function(t){var e=document.getElementById("textEditArea");if(e){e.style.fontSize="".concat(t,"px");var i=this.$imageEditor.currentFileStage.methods.calcTextAreaParams(e);e.style.width="".concat(i.width,"px"),e.style.height="".concat(i.height,"px"),e.style.left="".concat(i.x,"px"),e.style.top="".concat(i.y,"px")}var r=this.currentLabel.position().x+this.currentLabel.width()/2,n=this.currentLabel.position().y+this.currentLabel.height()/2;this.currentText.fontSize(t/this.$imageEditor.currentFileStage.imageConf.ratio),this.currentLabel.x(r-this.currentLabel.width()/2),this.currentLabel.y(n-this.currentLabel.height()/2),this.$imageEditor.currentFileStage.layer.batchDraw()}}},methods:{transparentOverlayColor:function(t){this.$imageEditor.currentFileStage.methods.transparentOverlayColor(t)},changeLeftOverlayColor:function(t){this.leftColor=t,this.$imageEditor.currentFileStage.methods.setOverlayColors()},decreaseTextSize:function(){},increaseTextSize:function(){}}}),Lt=Nt,Ht=(i("1577"),Object(d["a"])(Lt,Rt,Dt,!1,null,null,null)),Bt=Ht.exports,Vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__side-column-holder"},t._l(t.reverseColors,(function(e,r){return i("div",{staticClass:"overlay_color",class:"c-"+r,on:{click:function(e){return t.changeTextColor(r)}}},[t.currentTextMenuColor===r?i("div",{staticClass:"active_color"}):t._e()])})),0)},zt=[],Ut={name:"OverlayLeft",data:function(){return this.$imageEditor.currentFileStage.textState},computed:{reverseColors:function(){var t=this,e=[],i={};for(var r in this.$imageEditor.currentFileStage.overlayState.colors)e.push(r);return e=e.reverse(),e.forEach((function(e){i[e]=t.$imageEditor.currentFileStage.overlayState.colors[e]})),i},currentTextMenuColor:function(){return this.textBackground?this.textBackgroundColor:this.rightTextColor}},methods:{changeTextColor:function(t){this.$imageEditor.currentFileStage.methods.changeTextColor(t)}}},qt=Ut,Wt=Object(d["a"])(qt,Vt,zt,!1,null,"6598bfa8",null),Gt=Wt.exports,Kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-editor-loader"},[i("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-loading",href:"#icon-loading"}},[i("svg",{attrs:{id:"icon-loading",viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"white",d:"M12 .9a2.12 2.12 0 1 0 1.48.62A2.09 2.09 0 0 0 12 .9zM5.64 3.69A1.95 1.95 0 1 0 7 4.26a1.95 1.95 0 0 0-1.36-.57zM4.79 12a1.75 1.75 0 0 0-.53-1.26 1.76 1.76 0 0 0-2.52 0 1.76 1.76 0 0 0 0 2.52 1.76 1.76 0 0 0 2.52 0A1.75 1.75 0 0 0 4.79 12zm.85 4.74a1.67 1.67 0 0 0-1.16.47A1.64 1.64 0 0 0 4 18.36 1.61 1.61 0 0 0 5.64 20a1.64 1.64 0 0 0 1.15-.47 1.67 1.67 0 0 0 .47-1.16 1.6 1.6 0 0 0-1.62-1.62zM12 19.53a1.47 1.47 0 1 0 1 .47 1.45 1.45 0 0 0-1-.47zm6.36-2.48a1.3 1.3 0 0 0-1.31 1.31 1.31 1.31 0 0 0 1.31 1.32 1.33 1.33 0 0 0 1.32-1.32 1.31 1.31 0 0 0-1.32-1.31zm3.46-5.87a1.16 1.16 0 1 0 .34.82 1.16 1.16 0 0 0-.34-.82zm-3.46-4.54a1 1 0 0 0 .71-.3 1 1 0 0 0-1.41-1.41 1 1 0 0 0 .7 1.71z"}})])])])])},Xt=[],Qt={name:"SpinnerLoader"},Yt=Qt,Jt=(i("0463"),Object(d["a"])(Yt,Kt,Xt,!1,null,null,null)),Zt=Jt.exports;yt["default"].use(wt.a);var te=function(){if("text"===this.$imageEditor.currentFileStage.viewState.screen){var t=document.getElementById("textEditArea");if(t){var e=this.$imageEditor.currentFileStage.methods.calcTextAreaParams(t);t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.left="".concat(e.x,"px"),t.style.top="".concat(e.y,"px")}}else this.$imageEditor.currentFileStage.methods.normalizeStageFile(),this.config=this.$imageEditor.currentFileStage.config},ee={overlayLeft:$t,overlayRight:At,textLeft:Bt,textRight:Gt,SpinnerLoader:Zt},ie=Object.keys(ee),re={name:"EditorMain",components:ee,props:{screen:{type:String,default:"default"},showLongTap:{type:Boolean,default:!1}},data:function(){return{konvaConfig:{height:0,width:0},showPreloader:!0,isLongTapLoaded:!1,config:{}}},computed:{leftComponent:function(){var t=this;return ie.find((function(e){return new RegExp("".concat(t.screen,"Left")).test(e)}))},rightComponent:function(){var t=this;return ie.find((function(e){return new RegExp("".concat(t.screen,"Right")).test(e)}))},showMainStage:function(){return"deepAr"!==this.screen&&(!this.showLongTap||!this.isLongTapLoaded)},longTapData:function(){return!this.showLongTap&&this.$imageEditor.currentFileStage&&this.$imageEditor.currentFileStage.history?{src:"deepAr"!==this.screen?this.$imageEditor.currentFileStage.history.initialImageUrl:this.$imageEditor.currentFileStage.history.currentImageUrl}:this.showLongTap?{width:"deepAr"!==this.screen?"auto":"".concat(this.$imageEditor.currentFileStage.deepArSettings.width,"px"),height:"deepAr"!==this.screen?"auto":"".concat(this.$imageEditor.currentFileStage.deepArSettings.height,"px"),src:"deepAr"!==this.screen?this.$imageEditor.currentFileStage.history.initialImageUrl:this.$imageEditor.currentFileStage.history.currentImageUrl}:{}}},mounted:function(){var t=this;window.disableBodyScroll(!0),te=te.bind(this),window.addEventListener("resize",te),this.$imageEditor.events.$on("mounted",(function(){t.showPreloader=!1,t.config=t.$imageEditor.currentFileStage.config,Object(_t["a"])(t.$refs.imageContainer),t.$imageEditor.currentFileStage.settings.answer&&t.$imageEditor.currentFileStage.methods.addAnswer()})),this.$imageEditor.events.$on("showPreloader",(function(){t.showPreloader=!0})),this.$imageEditor.events.$on("hidePreloader",(function(){t.showPreloader=!1})),this.$imageEditor.$fileDispatch("setUpStage",{$el:this.$refs.stage,config:this.konvaConfig})},beforeDestroy:function(){window.enableBodyScroll(!0),window.removeEventListener("resize",te)},methods:{longTapLoaded:function(){this.isLongTapLoaded=!0}}},ne=re,oe=(i("794d"),Object(d["a"])(ne,gt,vt,!1,null,"e262dff0",null)),se=oe.exports,ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-image-editor__footer",class:{"static-bottom":"deepAr"===t.screen},attrs:{id:"imageEditorFooter"}},["default"===t.screen?[t.isSaveAsCopyAllowed?i("button",{staticClass:"g-btn m-rounded save_as_copy m-uppercase",on:{click:function(e){return t.save(!0)}}},[t._v(" "+t._s(t.$t("message.save_as_copy"))+" ")]):t._e(),i("button",{staticClass:"g-btn m-rounded done",attrs:{"at-attr":"save_btn"},on:{click:function(e){return t.save(!1)}}},[t._v(" "+t._s(t.$t("message.save"))+" ")]),t.isRetakeAllowed?i("button",{staticClass:"g-btn m-rounded save_as_copy",on:{click:t.retake}},[t._v(" "+t._s(t.$t("message.retake_photo"))+" ")]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.shapeIsDraging,expression:"shapeIsDraging"}],staticClass:"text_delete"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-delete"})])]:[i(t.screen,{tag:"div"})]],2)},ce=[],ue=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"max-width"},[i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:t.rotateRightOverlay}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-right"})]),i("TouchRange",{attrs:{min:-180,max:180},model:{value:t.overlayRotationComputedModel,callback:function(e){t.overlayRotationComputedModel=e},expression:"overlayRotationComputedModel"}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:t.rotateLeftOverlay}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-left"})])],1),i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Opacity"},on:{click:t.decreaseOvelayOpacity}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-opacity-min"})]),i("TouchRange",{attrs:{min:0,max:100},model:{value:t.overlayOpacityComputedModel,callback:function(e){t.overlayOpacityComputedModel=e},expression:"overlayOpacityComputedModel"}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Opacity"},on:{click:t.increaseOvelayOpacity}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-opacity-max"})])],1)])},le=[],de=i("4fce"),he=i.n(de),pe={name:"OverlayFooter",components:{TouchRange:he.a},data:function(){return this.$imageEditor.currentFileStage.overlayState},computed:{overlayRotationComputedModel:{get:function(){return+this.overlayRotation},set:function(t){this.overlayRotation=+t;var e=this.$imageEditor.currentFileStage.methods.getOverlayGradientCoordinates();this.overlayRect.fillLinearGradientStartPoint(e.startPoint),this.overlayRect.fillLinearGradientEndPoint(e.endPoint),this.layer.batchDraw()}},overlayOpacityComputedModel:{get:function(){return 100*this.overlayOpacity},set:function(t){this.overlayReset=0===t,this.overlayOpacity=t/100,this.overlayRect&&this.overlayRect.opacity(this.overlayOpacity),this.layer.batchDraw()}},layer:function(){return this.$imageEditor.currentFileStage.layer}},mounted:function(){var t=this;this.$imageEditor.events.$on("overlayComputedsChange",(function(e){t.overlayRotationComputedModel=e.rotation,t.overlayOpacityComputedModel=e.opacity}))},methods:{rotateRightOverlay:function(){this.overlayRotationComputedModel=this.overlayRotation<=135?this.overlayRotation+45:180},rotateLeftOverlay:function(){this.overlayRotationComputedModel=this.overlayRotation>=-135?this.overlayRotation-45:-180},increaseOvelayOpacity:function(){this.overlayOpacityComputedModel=this.overlayOpacityComputed<=80?this.overlayOpacityComputed+20:100},decreaseOvelayOpacity:function(){this.overlayOpacityComputedModel=this.overlayOpacityComputed>=20?this.overlayOpacityComputed-20:0}}},me=pe,fe=Object(d["a"])(me,ue,le,!1,null,"6494a04a",null),ge=fe.exports,ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"max-width"},[i("div",{staticClass:"b-image-editor__crop_preset"},t._l(t.cropRelations,(function(e,r){return i("button",{key:r,staticClass:"b-image-editor__btn",class:{"rotate-90":"portrait"===t.cropOrientation,active:t.cropRelationActive===e[0]*e[1]},attrs:{type:"button",title:t.getRelationTitle(e)},on:{click:function(i){return t.changeCropSize(e[0],e[1])}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],class:"icon-crop-"+e[1]+"x"+e[0]}),i("span",[t._v(t._s("portrait"===t.cropOrientation?e[0]+":"+e[1]:e[1]+":"+e[0]))])])})),0),i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:t.rotateRightImage}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-right"})]),i("TouchRange",{attrs:{min:-180,max:180},on:{input:t.countImageRotateCompModel},model:{value:t.imageRotate,callback:function(e){t.imageRotate=e},expression:"imageRotate"}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Rotate"},on:{click:t.rotateLeftImage}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-rotate-left"})])],1),i("div",{staticClass:"b-image-editor__crop_slider"},[i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Resize"},on:{click:t.decreaseImageSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-size-min"})]),i("TouchRange",{ref:"sizeRange",attrs:{min:t.minImageScale,max:t.maxImageScale,value:t.imageScale},on:{input:t.countImageSizeCompModel},nativeOn:{dblclick:function(e){return t.resetImageScale(e)}}}),i("button",{staticClass:"b-image-editor__btn",attrs:{type:"button",title:"Resize"},on:{click:t.increaseImageSize}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-size-max"})])],1)])},ye=[],be={name:"CropFooter",components:{TouchRange:he.a},data:function(){return Object.assign(this.$imageEditor.currentFileStage.cropState,{imageScale:0,imageRotate:0})},computed:{image:function(){return this.$imageEditor.currentFileStage.image},layer:function(){return this.$imageEditor.currentFileStage.layer}},mounted:function(){var t=this;this.$imageEditor.events.$on("imageSizeViewChange",(function(e){t.countImageSizeCompModel(e,!0)})),this.$imageEditor.events.$on("imageRotateViewChange",(function(e){t.countImageRotateCompModel(e,!0)}))},methods:{getRelationTitle:function(t){return"portrait"===this.cropOrientation?"".concat(t[0],":").concat(t[1]):"".concat(t[1],":").concat(t[0])},changeCropSize:function(t,e){this.$imageEditor.currentFileStage.methods.setUpCrop(t,e)},rotateRightImage:function(){this.countImageRotateCompModel(+this.image.rotation()<=90?+this.image.rotation()+90:180)},rotateLeftImage:function(){this.countImageRotateCompModel(+this.image.rotation()<=-90?-180:+this.image.rotation()-90)},increaseImageSize:function(){this.countImageSizeCompModel(this.imageScale<=this.maxImageScale-25?this.imageScale+25:this.maxImageScale)},decreaseImageSize:function(){this.countImageSizeCompModel(this.imageScale>=this.minImageScale+25?this.imageScale-25:this.minImageScale)},resetImageScale:function(){this.countImageSizeCompModel(100)},countImageSizeCompModel:function(t,e){e||this.$imageEditor.events.$emit("imageSizeStateChange",t),this.$set(this,"imageScale",+t),this.$forceUpdate()},countImageRotateCompModel:function(t,e){e||this.$imageEditor.events.$emit("imageRotateStateChange",t),this.$set(this,"imageRotate",+t),this.$forceUpdate()}}},we=be,_e=Object(d["a"])(we,ve,ye,!1,null,null,null),Se=_e.exports,ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-footer-btns"},[i(t.comp,{tag:"div"})],1)},Ce=[],xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-control-panel"},[i("face",{on:{makeup:t.changeMakeupDeepAr,makeupVector:t.implementColor}})],1)},Oe=[],$e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-makeup"},[i("div",{staticClass:"deepAr-range"},["smooth"===t.makeupsub?[i("TouchRange",{attrs:{min:0,max:2},on:{mouseup:function(e){return t.changeMakeup(e,e.from)},input:t.changeMakeup},model:{value:t.$imageEditor.currentFileStage.deepArSettings.face_makeup[t.activeMakeup],callback:function(e){t.$set(t.$imageEditor.currentFileStage.deepArSettings.face_makeup,t.activeMakeup,e)},expression:"$imageEditor.currentFileStage.deepArSettings.face_makeup[activeMakeup]"}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",on:{click:function(e){return t.changeMakeup({value:0},t.$imageEditor.currentFileStage.deepArSettings.face_makeup[t.activeMakeup])}}})]:t.foundationIndex>=0?[i("TouchRange",{attrs:{min:0,max:.4},on:{mouseup:function(e){return t.changeFoundationLuma(e,e.from)},input:t.changeFoundationLuma},model:{value:t.$imageEditor.currentFileStage.deepArSettings.foundationColorsMapStates[""+t.foundation+t.foundationColorsMap[t.foundation][t.foundationIndex]],callback:function(e){t.$set(t.$imageEditor.currentFileStage.deepArSettings.foundationColorsMapStates,""+t.foundation+t.foundationColorsMap[t.foundation][t.foundationIndex],e)},expression:"$imageEditor.currentFileStage.deepArSettings.foundationColorsMapStates[`${foundation}${foundationColorsMap[foundation][foundationIndex]}`]"}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",on:{click:function(e){return t.changeFoundationLuma({value:0},t.$imageEditor.currentFileStage.deepArSettings.foundationColorsMapStates[""+t.foundation+t.foundationColorsMap[t.foundation][t.foundationIndex]])}}})]:t._e()],2),"foundation"===t.makeupsub&&t.foundation?i("div",{staticClass:"deepAr-control-btns deepAr-color-thumbs"},t._l(t.foundationColorsMap[t.foundation],(function(e,r){return i("button",{staticClass:"b-image-editor__btn",style:{"border-color":t.foundationIndex===r?"white":"black"},attrs:{type:"button",title:"Face dimensions"},on:{click:function(e){return t.changeFoundationColor(r,!0)}}},[i("div",{staticClass:"deepAr-color-thumb",style:{"background-color":"rgba("+e.join(",")+")"}})])})),0):t._e(),i("div",{staticClass:"deepAr-control-btns"},["smooth"!==t.makeupsub?i("default-back",{on:{back:t.goBack}}):t._e(),i("div",{staticClass:"deepAr-control-btns"},["smooth"===t.makeupsub?[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"smooth"===t.makeupsub?1:.6},attrs:{type:"button",title:"Smooth"},on:{click:function(e){return t.changeCategory("smooth")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-smooth"}),i("span",[t._v(" Smooth ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"foundation"===t.makeupsub?1:.6},attrs:{type:"button",title:"Foundation"},on:{click:function(e){return t.changeCategory("foundation")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-face"}),i("span",[t._v(" Foundation ")])])]:[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"light"===t.foundation?1:.6},attrs:{type:"button",title:"Light"},on:{click:function(e){return t.changeFoundation("light")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"light",staticClass:"icon-color-light"}),i("span",[t._v(" Light ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"medium"===t.foundation?1:.6},attrs:{type:"button",title:"Medium"},on:{click:function(e){return t.changeFoundation("medium")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"medium",staticClass:"icon-color-medium"}),i("span",[t._v(" Medium ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"dark"===t.foundation?1:.6},attrs:{type:"button",title:"Dark"},on:{click:function(e){return t.changeFoundation("dark")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-color-dark"}),i("span",[t._v(" Dark ")])])]],2)],1)])},Ee=[],je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("input",{ref:"ff",attrs:{type:"range",step:t.step,min:t.min,max:t.max,disabled:t.disabled},domProps:{value:t.value},on:{input:function(e){return t.emit(e.target.value)},mouseup:function(e){return t.mouseUp(e.target.value)},mousedown:function(e){return t.start(e.target.value)},touchmove:t.touchmove,touchstart:t.touchmove}})},Pe=[],Ie=(i("c5f6"),{name:"TouchRange",props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:1},step:{type:[Number,String],default:"any"},disabled:{type:Boolean,default:!1}},data:function(){return{startFrom:0}},computed:{range:function(){return this.max-this.min}},methods:{emit:function(t){this.$emit("input",{value:Number(t),from:+this.startFrom})},mouseUp:function(t){this.$emit("mouseup",{value:+t,from:+this.startFrom})},start:function(t){this.startFrom=t},touchmove:function(t){t.preventDefault();var e=t.target.clientWidth,i=Math.max(0,Math.min(e,t.touches[0].pageX-t.target.offsetLeft))/e;this.emit(i*this.range+this.min)}}}),Me=Ie,Ae=Object(d["a"])(Me,je,Pe,!1,null,null,null),Re=Ae.exports,De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"b-image-editor__btn",staticStyle:{opacity:"0.6"},attrs:{type:"button",title:"Back"},on:{click:t.sendBack}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-back"}),i("span",[t._v(" Return ")])])},Fe=[],Te={methods:{sendBack:function(){this.$emit("back")}}},Ne=Te,Le=Object(d["a"])(Ne,De,Fe,!1,null,null,null),He=Le.exports,Be={smooth:"smoothingAmount"},Ve={name:"Face",components:{TouchRange:Re,defaultBack:He},data:function(){return this.$imageEditor.currentFileStage.deepArSettings},mounted:function(){var t=this;this.$imageEditor.events.$on("deepArRerender",(function(){t.$forceUpdate()}))},computed:{activeMakeup:function(){return Be[this.makeupsub]}},methods:{changeMakeup:function(t,e){this.$imageEditor.currentFileStage.deepArSettings.face_makeup[this.activeMakeup]=+t.value,this.$emit("makeup",{value:t.value,path:Be[this.makeupsub],log:e,makeupsub:this.makeupsub})},changeCategory:function(t){this.makeupsub=t,this.foundationIndex=-1},changeFoundation:function(t){this.foundation=t,this.changeFoundationColor(-1)},changeFoundationLuma:function(t,e){this.$imageEditor.currentFileStage.deepArSettings.foundationColorsMapStates["".concat(this.foundation).concat(this.foundationColorsMap[this.foundation][this.foundationIndex].join(","))]=+t.value,this.$emit("makeup",{value:t.value,path:"foundationLumaClamp",index:this.foundationIndex,makeupsub:this.makeupsub,foundation:this.foundation}),this.$emit("makeupVector",{data:{colors:{r:this.foundationColorsMap[this.foundation][this.foundationIndex][0],g:this.foundationColorsMap[this.foundation][this.foundationIndex][1],b:this.foundationColorsMap[this.foundation][this.foundationIndex][2]},opacity:1},path:"foundationColor",node:"face_makeup",log:e,oldLumaValue:"number"===typeof e?+e:0,index:this.foundationIndex,shouldSaveIndex:+t.from,makeupsub:this.makeupsub,foundation:this.foundation,lumaValue:t.value}),this.$forceUpdate()},changeFoundationColor:function(t,e){if(this.foundationIndex=t,-1!==t){var i=this.$imageEditor.currentFileStage.deepArSettings.foundationColorsMapStates["".concat(this.foundation).concat(this.foundationColorsMap[this.foundation][t].join(","))];+i?this.changeFoundationLuma({value:i},e):this.changeFoundationLuma({value:.2},e)}},goBack:function(){"foundation"===this.makeupsub?this.makeupsub="smooth":this.$emit("back")}}},ze=Ve,Ue=(i("44d7"),Object(d["a"])(ze,$e,Ee,!1,null,null,null)),qe=Ue.exports,We={name:"DeepArMakeup",components:{Face:qe},data:function(){return{previousState:{}}},methods:{implementColor:function(t){var e=t.node,i=t.path,r=t.data,n=t.log,o=t.index,s=t.makeupsub,a=t.foundation,c=t.lumaValue,u=t.oldLumaValue,l=t.shouldSaveIndex,d=[e,"MeshRenderer",i,r.colors.r/100,r.colors.g/100,r.colors.b/100,r.opacity-.01],h={index:o,foundation:a,category:"makeup",subcategory:s,shouldSaveIndex:l};this.$imageEditor.currentFileStage.deepAr.changeParameterVector.apply(null,d),"undefined"!==typeof n&&this.$imageEditor.currentFileStage.historydeepAr.push("deepAr","vector",{to:d,toState:h,fromState:Object.keys(this.previousState).length>0?this.previousState:h,lumaValue:c,oldLumaValue:u}),this.previousState=h},changeMakeupDeepAr:function(t){var e=["face_makeup","MeshRenderer",t.path,+t.value];if(this.$imageEditor.currentFileStage.deepAr.changeParameterFloat.apply(null,e),"number"===typeof t.log&&"foundation"!==t.makeupsub){var i=["face_makeup","MeshRenderer",t.path,+t.log];this.$imageEditor.currentFileStage.historydeepAr.push("deepAr","parameter",{to:e,from:i,category:"makeup",subcategory:t.makeupsub,foundation:t.foundation,index:t.index})}}}},Ge=We,Ke=(i("c618"),Object(d["a"])(Ge,xe,Oe,!1,null,null,null)),Xe=Ke.exports,Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-control-panel"},[t.activeBeauty?i("div",{staticClass:"deepAr-range"},[i("TouchRange",{attrs:{min:-100,max:100},on:{input:t.changeBeautyDeepAr,mouseup:function(e){return t.changeBeautyDeepAr(e,e.from)}},model:{value:t.$imageEditor.currentFileStage.deepArSettings.beauty_shapes[t.activeBeauty],callback:function(e){t.$set(t.$imageEditor.currentFileStage.deepArSettings.beauty_shapes,t.activeBeauty,e)},expression:"$imageEditor.currentFileStage.deepArSettings.beauty_shapes[activeBeauty]"}}),i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",on:{click:function(e){return t.changeBeautyDeepAr(0,t.$imageEditor.currentFileStage.deepArSettings.beauty_shapes[t.activeBeauty])}}})],1):t._e(),t.haveNoSubs?i("div",{staticClass:"deepAr-control-btns"},[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"face"===t.facesub?1:.6},attrs:{type:"button"},on:{click:function(e){return t.changeCategory("face")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-face"}),i("span",[t._v(" "+t._s(t.$t("message.image_editor_face"))+" ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"eyes"===t.facesub?1:.6},attrs:{type:"button"},on:{click:function(e){return t.changeCategory("eyes")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-eye"}),i("span",[t._v(" "+t._s(t.$t("message.image_editor_eyes"))+" ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"nose"===t.facesub?1:.6},attrs:{type:"button"},on:{click:function(e){return t.changeCategory("nose")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-nose"}),i("span",[t._v(" "+t._s(t.$t("message.image_editor_nose"))+" ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"eyebrows"===t.facesub?1:.6},attrs:{type:"button"},on:{click:function(e){return t.changeCategory("eyebrows")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-eyebrows"}),i("span",[t._v(" "+t._s(t.$t("message.image_editor_eyebrows"))+" ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"lips"===t.facesub?1:.6},attrs:{type:"button"},on:{click:function(e){return t.changeCategory("lips")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-lips"}),i("span",[t._v(" "+t._s(t.$t("message.image_editor_lips"))+" ")])])]):i("div",{staticClass:"deepAr-control-panel-flex"},[i("default-back",{on:{back:function(e){t.facesub=!1}}}),i(t.facesub,{tag:"div",staticClass:"deepAr-control-btns",on:{category:function(e){t.facesubsub=e}}})],1)])},Ye=[],Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"height"===t.facesubsub?1:.6},attrs:{type:"button",title:"Height"},on:{click:function(e){return t.changeCategory("height")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-height"}),i("span",[t._v(" Height ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"width"===t.facesubsub?1:.6},attrs:{type:"button",title:"Weight"},on:{click:function(e){return t.changeCategory("width")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-width"}),i("span",[t._v(" Weight ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"jawline"===t.facesubsub?1:.6},attrs:{type:"button",title:"Jawline"},on:{click:function(e){return t.changeCategory("jawline")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-jawline"}),i("span",[t._v(" Jawline ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"chin"===t.facesubsub?1:.6},attrs:{type:"button",title:"Chin"},on:{click:function(e){return t.changeCategory("chin")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-chin"}),i("span",[t._v(" Chin ")])])])},Ze=[],ti={name:"Face",data:function(){return this.$imageEditor.currentFileStage.deepArSettings},mounted:function(){this.changeCategory("height")},methods:{changeCategory:function(t){this.facesubsub=t,this.$emit("category",t)}}},ei=ti,ii=Object(d["a"])(ei,Je,Ze,!1,null,"0844bd94",null),ri=ii.exports,ni=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-left_btns"},[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"position"===t.facesubsub?1:.6},attrs:{type:"button",title:"Position"},on:{click:function(e){return t.changeCategory("position")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-height"}),i("span",[t._v(" Position ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"thick"===t.facesubsub?1:.6},attrs:{type:"button",title:"Thickness"},on:{click:function(e){return t.changeCategory("thick")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-thickness"}),i("span",[t._v(" Thickness ")])])])},oi=[],si={name:"Eyebrows",data:function(){return this.$imageEditor.currentFileStage.deepArSettings},mounted:function(){this.changeCategory("position")},methods:{changeCategory:function(t){this.facesubsub=t,this.$emit("category",t)}}},ai=si,ci=Object(d["a"])(ai,ni,oi,!1,null,"d231cbec",null),ui=ci.exports,li=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"deepAr-left_btns"},[i("button",{staticClass:"b-image-editor__btn",style:{opacity:"position"===t.facesubsub?1:.6},attrs:{type:"button",title:"Position"},on:{click:function(e){return t.changeCategory("position")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-height"}),i("span",[t._v(" Position ")])]),i("button",{staticClass:"b-image-editor__btn",style:{opacity:"thick"===t.facesubsub?1:.6},attrs:{type:"button",title:"Thickness"},on:{click:function(e){return t.changeCategory("thick")}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-thickness"}),i("span",[t._v(" Thickness ")])])])},di=[],hi={name:"Lips",data:function(){return this.$imageEditor.currentFileStage.deepArSettings},mounted:function(){this.changeCategory("position")},methods:{changeCategory:function(t){this.facesubsub=t,this.$emit("category",t)}}},pi=hi,mi=Object(d["a"])(pi,li,di,!1,null,"b923dd6c",null),fi=mi.exports,gi={faceheight:!0,facewidth:!0,facejawline:!0,facechin:!0,nosefalse:!0,eyebrowsposition:!0,eyebrowsthick:!0},vi={faceheight:"upper_position_alt",facewidth:"thin",facejawline:"jawline",facechin:"chin",eyesfalse:"eyes",nosefalse:"nose",eyebrowsposition:"eyebrows_position",eyebrowsthick:"eyebrows_thickness",lipsposition:"mouth",lipsthick:"mouth_vertical"},yi={name:"DeepArFace",components:{Face:ri,Eyebrows:ui,Lips:fi,defaultBack:He,TouchRange:Re},data:function(){return this.$imageEditor.currentFileStage.deepArSettings},computed:{activeBeauty:function(){return vi["".concat(this.facesub).concat(this.facesubsub)]||!1},shouldReverse:function(){return gi["".concat(this.facesub).concat(this.facesubsub)]||!1},haveNoSubs:function(){return!this.facesub||this.facesub&&this.activeBeauty&&!this.facesubsub}},methods:{changeCategory:function(t){this.facesub=t,this.facesubsub=!1},changeBeautyDeepAr:function(t,e){if(this.$imageEditor.currentFileStage.deepAr){var i=this.shouldReverse?-1*+t.value:+t.value,r=["beauty_shapes","MeshRenderer","blendShape1.".concat(this.activeBeauty),+i];if(this.$imageEditor.currentFileStage.deepArSettings.beauty_shapes[this.activeBeauty]=+t.value,this.$imageEditor.currentFileStage.deepAr.changeParameterFloat.apply(null,r),"number"===typeof e){var n=["beauty_shapes","MeshRenderer","blendShape1.".concat(this.activeBeauty),this.shouldReverse?-1*+e:+e];this.$imageEditor.currentFileStage.historydeepAr.push("deepAr","parameter",{to:r,from:n,category:"face",subcategory:this.facesub,subsubcategory:this.facesubsub,shouldReverse:this.shouldReverse})}}}}},bi=yi,wi=Object(d["a"])(bi,Qe,Ye,!1,null,null,null),_i=wi.exports,Si={name:"DeepArFooter",components:{Makeup:Xe,Face:_i},data:function(){return this.$imageEditor.currentFileStage.deepArSettings},computed:{comp:function(){return this.category||"makeup"}}},ki=Si,Ci=(i("c37b"),Object(d["a"])(ki,ke,Ce,!1,null,null,null)),xi=Ci.exports,Oi={name:"EditorFooter",components:{overlay:ge,crop:Se,deepAr:xi},props:{screen:{type:String,default:"default"}},data:function(){return{shapeIsDraging:!1,isSaveAsCopyAllowed:!0,isRetakeAllowed:!0}},mounted:function(){var t=this;this.$imageEditor.events.$on("shapeDragging",(function(e){t.shapeIsDraging=e})),this.$imageEditor.events.$on("saveAsCopyPermToggle",(function(e){t.isSaveAsCopyAllowed=e})),this.isSaveAsCopyAllowed=this.$imageEditor.currentFileStage.settings.saveAsCopy,this.isRetakeAllowed=this.$imageEditor.currentFileStage.settings.takePhoto},methods:{save:function(t){this.$imageEditor.currentFileStage.sendFile(t)},retake:function(){this.$imageEditor.currentFileStage.rejectFile({retake:!0})}}},$i=Oi,Ei=(i("b17b"),Object(d["a"])($i,ae,ce,!1,null,"f7cca1f0",null)),ji=Ei.exports;function Pi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ii(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Pi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Mi={cropLeftEditorHeader:b,cropCenterEditorHeader:x,defaultLeftEditorHeader:A,defaultRightEditorHeader:L,overlayLeftEditorHeader:q,textLeftEditorHeader:rt,textCenterEditorHeader:Y,deepArLeftEditorHeader:ut,deepArCenterEditorHeader:ft},Ai=Object.keys(Mi),Ri={components:Ii(Ii({editorHeader:p},Mi),{},{editorMain:se,editorFooter:ji,questionBlock:s["a"]}),data:function(){return{screen:"default",longTap:!1,showFooter:!0}},computed:{headerComponentLeft:function(){var t=this;return Ai.find((function(e){return new RegExp("^".concat(t.screen,"Left")).test(e)}))},headerComponentCenter:function(){var t=this;return Ai.find((function(e){return new RegExp("^".concat(t.screen,"Center")).test(e)}))},headerComponentRight:function(){var t=this;return Ai.find((function(e){return new RegExp("^".concat(t.screen,"Right")).test(e)}))},isImageEditorMounted:function(){return this.$imageEditor.isMounted}},mounted:function(){var t=this;this.$imageEditor.events.$on("mounted",(function(){t.$imageEditor.currentFileStage.viewState=t._data})),this.$imageEditor.events.$on("showPreloader",(function(){t.showFooter=!1})),this.$imageEditor.events.$on("hidePreloader",(function(){t.showFooter=!0}))},updated:function(){this.$imageEditor.currentFileStage.methods.normalizeStageFile()},errorCaptured:function(t){return this.$imageEditor.currentFileStage.logError(t),!1}},Di=Ri,Fi=Object(d["a"])(Di,r,n,!1,null,null,null);e["default"]=Fi.exports},"44d7":function(t,e,i){"use strict";i("57b8")},"4971b":function(t,e,i){(function(e,r){t.exports=r(i("2b0e"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"091b":function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,".vue-slider-dot{position:absolute;-webkit-transition:all 0s;transition:all 0s;z-index:5}.vue-slider-dot:focus{outline:none}.vue-slider-dot-tooltip{position:absolute;visibility:hidden}.vue-slider-dot-hover:hover .vue-slider-dot-tooltip,.vue-slider-dot-tooltip-show{visibility:visible}.vue-slider-dot-tooltip-top{top:-10px;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.vue-slider-dot-tooltip-bottom{bottom:-10px;left:50%;-webkit-transform:translate(-50%,100%);transform:translate(-50%,100%)}.vue-slider-dot-tooltip-left{left:-10px;top:50%;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%)}.vue-slider-dot-tooltip-right{right:-10px;top:50%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}",""]),t.exports=e},"24fb":function(t,e,i){"use strict";function r(t,e){var i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"===typeof btoa){var o=n(r),s=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[i].concat(s).concat([o]).join("\n")}return[i].join("\n")}function n(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(i," */")}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=r(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,r){"string"===typeof t&&(t=[[null,t,""]]);var n={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(n[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&n[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),e.push(c))}},e}},2638:function(t,e,i){"use strict";function r(){return r=Object.assign||function(t){for(var e,i=1;i<arguments.length;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)}var n=["attrs","props","domProps"],o=["class","style","directives"],s=["on","nativeOn"],a=function(t){return t.reduce((function(t,e){for(var i in e)if(t[i])if(-1!==n.indexOf(i))t[i]=r({},t[i],e[i]);else if(-1!==o.indexOf(i)){var a=t[i]instanceof Array?t[i]:[t[i]],u=e[i]instanceof Array?e[i]:[e[i]];t[i]=a.concat(u)}else if(-1!==s.indexOf(i))for(var l in e[i])if(t[i][l]){var d=t[i][l]instanceof Array?t[i][l]:[t[i][l]],h=e[i][l]instanceof Array?e[i][l]:[e[i][l]];t[i][l]=d.concat(h)}else t[i][l]=e[i][l];else if("hook"==i)for(var p in e[i])t[i][p]=t[i][p]?c(t[i][p],e[i][p]):e[i][p];else t[i]=e[i];else t[i]=e[i];return t}),{})},c=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=a},"499e":function(t,e,i){"use strict";function r(t,e){for(var i=[],r={},n=0;n<e.length;n++){var o=e[n],s=o[0],a=o[1],c=o[2],u=o[3],l={id:t+":"+n,css:a,media:c,sourceMap:u};r[s]?r[s].parts.push(l):i.push(r[s]={id:s,parts:[l]})}return i}i.r(e),i.d(e,"default",(function(){return m}));var n="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=n&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,u=!1,l=function(){},d=null,h="data-vue-ssr-id",p="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,i,n){u=i,d=n||{};var s=r(t,e);return f(s),function(e){for(var i=[],n=0;n<s.length;n++){var a=s[n],c=o[a.id];c.refs--,i.push(c)}for(e?(s=r(t,e),f(s)):s=[],n=0;n<i.length;n++)if(c=i[n],0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete o[c.id]}}}function f(t){for(var e=0;e<t.length;e++){var i=t[e],r=o[i.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](i.parts[n]);for(;n<i.parts.length;n++)r.parts.push(v(i.parts[n]));r.parts.length>i.parts.length&&(r.parts.length=i.parts.length)}else{var s=[];for(n=0;n<i.parts.length;n++)s.push(v(i.parts[n]));o[i.id]={id:i.id,refs:1,parts:s}}}}function g(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function v(t){var e,i,r=document.querySelector("style["+h+'~="'+t.id+'"]');if(r){if(u)return l;r.parentNode.removeChild(r)}if(p){var n=c++;r=a||(a=g()),e=b.bind(null,r,n,!1),i=b.bind(null,r,n,!0)}else r=g(),e=w.bind(null,r),i=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else i()}}var y=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function b(t,e,i,r){var n=i?"":r.css;if(t.styleSheet)t.styleSheet.cssText=y(e,n);else{var o=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function w(t,e){var i=e.css,r=e.media,n=e.sourceMap;if(r&&t.setAttribute("media",r),d.ssrId&&t.setAttribute(h,e.id),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}},"4abb":function(t,e,i){var r=i("7a57");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("499e").default;n("b2af7572",r,!0,{sourceMap:!1,shadowMode:!1})},"4ed8":function(t,e,i){var r=i("091b");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("499e").default;n("2f6bee1a",r,!0,{sourceMap:!1,shadowMode:!1})},"556c":function(t,e,i){var r=i("eef2");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=i("499e").default;n("1209fd47",r,!0,{sourceMap:!1,shadowMode:!1})},"65d9":function(t,e,i){"use strict";
/**
  * vue-class-component v7.0.1
  * (c) 2015-present Evan You
  * @license MIT
  */function r(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}Object.defineProperty(e,"__esModule",{value:!0});var n=r(i("8bbf")),o="undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys;function s(t,e){a(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(i){a(t.prototype,e.prototype,i)})),Object.getOwnPropertyNames(e).forEach((function(i){a(t,e,i)}))}function a(t,e,i){var r=i?Reflect.getOwnMetadataKeys(e,i):Reflect.getOwnMetadataKeys(e);r.forEach((function(r){var n=i?Reflect.getOwnMetadata(r,e,i):Reflect.getOwnMetadata(r,e);i?Reflect.defineMetadata(r,n,t,i):Reflect.defineMetadata(r,n,t)}))}var c={__proto__:[]},u=c instanceof Array;function l(t){return function(e,i,r){var n="function"===typeof e?e:e.constructor;n.__decorators__||(n.__decorators__=[]),"number"!==typeof r&&(r=void 0),n.__decorators__.push((function(e){return t(e,i,r)}))}}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.extend({mixins:t})}function h(t){var e=typeof t;return null==t||"object"!==e&&"function"!==e}function p(t,e){var i=e.prototype._init;e.prototype._init=function(){var e=this,i=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||i.push(r);i.forEach((function(i){"_"!==i.charAt(0)&&Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},configurable:!0})}))};var r=new e;e.prototype._init=i;var n={};return Object.keys(r).forEach((function(t){void 0!==r[t]&&(n[t]=r[t])})),n}var m=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function f(t,e){void 0===e&&(e={}),e.name=e.name||t._componentTag||t.name;var i=t.prototype;Object.getOwnPropertyNames(i).forEach((function(t){if("constructor"!==t)if(m.indexOf(t)>-1)e[t]=i[t];else{var r=Object.getOwnPropertyDescriptor(i,t);void 0!==r.value?"function"===typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){var e;return e={},e[t]=r.value,e}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return p(this,t)}});var r=t.__decorators__;r&&(r.forEach((function(t){return t(e)})),delete t.__decorators__);var a=Object.getPrototypeOf(t.prototype),c=a instanceof n?a.constructor:n,u=c.extend(e);return g(u,t,c),o&&s(u,t),u}function g(t,e,i){Object.getOwnPropertyNames(e).forEach((function(r){if("prototype"!==r){var n=Object.getOwnPropertyDescriptor(t,r);if(!n||n.configurable){var o=Object.getOwnPropertyDescriptor(e,r);if(!u){if("cid"===r)return;var s=Object.getOwnPropertyDescriptor(i,r);if(!h(o.value)&&s&&s.value===o.value)return}Object.defineProperty(t,r,o)}}}))}function v(t){return"function"===typeof t?f(t):function(e){return f(e,t)}}v.registerHooks=function(t){m.push.apply(m,t)},e.default=v,e.createDecorator=l,e.mixins=d},"7a57":function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,".vue-slider{position:relative;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.vue-slider-rail{position:relative;width:100%;height:100%;-webkit-transition-property:width,height,left,right,top,bottom;transition-property:width,height,left,right,top,bottom}.vue-slider-process{position:absolute;z-index:1}",""]),t.exports=e},8875:function(t,e,i){var r,n,o;(function(i,s){n=[],r=s,o="function"===typeof r?r.apply(e,n):r,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var i,r,n,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,a=o.exec(p.stack)||s.exec(p.stack),c=a&&a[1]||!1,u=a&&a[2]||!1,l=document.location.href.replace(document.location.hash,""),d=document.getElementsByTagName("script");c===l&&(i=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),n=i.replace(r,"$1").trim());for(var h=0;h<d.length;h++){if("interactive"===d[h].readyState)return d[h];if(d[h].src===c)return d[h];if(c===l&&d[h].innerHTML&&d[h].innerHTML.trim()===n)return d[h]}return null}}return t}))},"8bbf":function(e,i){e.exports=t},eef2:function(t,e,i){var r=i("24fb");e=r(!1),e.push([t.i,".vue-slider-marks{position:relative;width:100%;height:100%}.vue-slider-mark{position:absolute;z-index:1}.vue-slider-ltr .vue-slider-mark,.vue-slider-rtl .vue-slider-mark{width:0;height:100%;top:50%}.vue-slider-ltr .vue-slider-mark-step,.vue-slider-rtl .vue-slider-mark-step{top:0}.vue-slider-ltr .vue-slider-mark-label,.vue-slider-rtl .vue-slider-mark-label{top:100%;margin-top:10px}.vue-slider-ltr .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ltr .vue-slider-mark-step{left:0}.vue-slider-ltr .vue-slider-mark-label{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.vue-slider-rtl .vue-slider-mark{-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.vue-slider-rtl .vue-slider-mark-step{right:0}.vue-slider-rtl .vue-slider-mark-label{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.vue-slider-btt .vue-slider-mark,.vue-slider-ttb .vue-slider-mark{width:100%;height:0;left:50%}.vue-slider-btt .vue-slider-mark-step,.vue-slider-ttb .vue-slider-mark-step{left:0}.vue-slider-btt .vue-slider-mark-label,.vue-slider-ttb .vue-slider-mark-label{left:100%;margin-left:10px}.vue-slider-btt .vue-slider-mark{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.vue-slider-btt .vue-slider-mark-step{top:0}.vue-slider-btt .vue-slider-mark-label{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-slider-ttb .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ttb .vue-slider-mark-step{bottom:0}.vue-slider-ttb .vue-slider-mark-label{bottom:50%;-webkit-transform:translateY(50%);transform:translateY(50%)}.vue-slider-mark-label,.vue-slider-mark-step{position:absolute}",""]),t.exports=e},fb15:function(t,e,i){"use strict";if(i.r(e),i.d(e,"ERROR_TYPE",(function(){return Y})),i.d(e,"VueSliderMark",(function(){return V})),i.d(e,"VueSliderDot",(function(){return E})),"undefined"!==typeof window){var r=window.document.currentScript,n=i("8875");r=n(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:n});var o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(i.p=o[1])}var s=i("2638"),a=i.n(s);function c(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}var u=i("8bbf"),l=i.n(u),d=i("65d9"),h=i.n(d);function p(t,e){return void 0===e&&(e={}),Object(d["createDecorator"])((function(i,r){(i.props||(i.props={}))[r]=e,i.model={prop:r,event:t||r}}))}function m(t){return void 0===t&&(t={}),Object(d["createDecorator"])((function(e,i){(e.props||(e.props={}))[i]=t}))}function f(t,e){void 0===e&&(e={});var i=e.deep,r=void 0!==i&&i,n=e.immediate,o=void 0!==n&&n;return Object(d["createDecorator"])((function(e,i){"object"!==typeof e.watch&&(e.watch=Object.create(null));var n=e.watch;"object"!==typeof n[t]||Array.isArray(n[t])?"undefined"===typeof n[t]&&(n[t]=[]):n[t]=[n[t]],n[t].push({handler:i,deep:r,immediate:o})}))}function g(t){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),t}function w(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function S(t){var e=x();return function(){var i,r=O(t);if(e){var n=O(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return k(this,i)}}function k(t,e){return!e||"object"!==g(e)&&"function"!==typeof e?C(t):e}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}i("4ed8");var $=function(){var t=function(t){w(i,t);var e=S(i);function i(){return v(this,i),e.apply(this,arguments)}return b(i,[{key:"dragStart",value:function(t){if(this.disabled)return!1;this.$emit("drag-start")}},{key:"render",value:function(){var t=arguments[0];return t("div",{ref:"dot",class:this.dotClasses,attrs:{"aria-valuetext":this.tooltipValue},on:{mousedown:this.dragStart,touchstart:this.dragStart}},[this.$slots.dot||t("div",{class:this.handleClasses,style:this.dotStyle}),"none"!==this.tooltip?t("div",{class:this.tooltipClasses},[this.$slots.tooltip||t("div",{class:this.tooltipInnerClasses,style:this.tooltipStyle},[t("span",{class:"vue-slider-dot-tooltip-text"},[this.tooltipValue])])]):null])}},{key:"dotClasses",get:function(){return["vue-slider-dot",{"vue-slider-dot-hover":"hover"===this.tooltip||"active"===this.tooltip,"vue-slider-dot-disabled":this.disabled,"vue-slider-dot-focus":this.focus}]}},{key:"handleClasses",get:function(){return["vue-slider-dot-handle",{"vue-slider-dot-handle-disabled":this.disabled,"vue-slider-dot-handle-focus":this.focus}]}},{key:"tooltipClasses",get:function(){return["vue-slider-dot-tooltip",["vue-slider-dot-tooltip-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-show":this.showTooltip}]}},{key:"tooltipInnerClasses",get:function(){return["vue-slider-dot-tooltip-inner",["vue-slider-dot-tooltip-inner-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-inner-disabled":this.disabled,"vue-slider-dot-tooltip-inner-focus":this.focus}]}},{key:"showTooltip",get:function(){switch(this.tooltip){case"always":return!0;case"none":return!1;case"focus":case"active":return!!this.focus;default:return!1}}},{key:"tooltipValue",get:function(){return this.tooltipFormatter?"string"===typeof this.tooltipFormatter?this.tooltipFormatter.replace(/\{value\}/,String(this.value)):this.tooltipFormatter(this.value):this.value}}]),i}(l.a);return c([m({default:0})],t.prototype,"value",void 0),c([m()],t.prototype,"tooltip",void 0),c([m()],t.prototype,"dotStyle",void 0),c([m()],t.prototype,"tooltipStyle",void 0),c([m({type:String,validator:function(t){return["top","right","bottom","left"].indexOf(t)>-1},required:!0})],t.prototype,"tooltipPlacement",void 0),c([m({type:[String,Function]})],t.prototype,"tooltipFormatter",void 0),c([m({type:Boolean,default:!1})],t.prototype,"focus",void 0),c([m({default:!1})],t.prototype,"disabled",void 0),t=c([h.a],t),t}(),E=$;function j(t){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,i){return e&&I(t.prototype,e),i&&I(t,i),t}function A(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}function R(t,e){return R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},R(t,e)}function D(t){var e=N();return function(){var i,r=L(t);if(e){var n=L(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return F(this,i)}}function F(t,e){return!e||"object"!==j(e)&&"function"!==typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}i("556c");var H,B=function(){var t=function(t){A(i,t);var e=D(i);function i(){return P(this,i),e.apply(this,arguments)}return M(i,[{key:"labelClickHandle",value:function(t){t.stopPropagation(),this.$emit("pressLabel",this.mark.pos)}},{key:"render",value:function(){var t=arguments[0],e=this.mark;return t("div",{class:this.marksClasses},[this.$slots.step||t("div",{class:this.stepClasses,style:[this.stepStyle,e.style,e.active?this.stepActiveStyle:null,e.active?e.activeStyle:null]}),this.hideLabel?null:this.$slots.label||t("div",{class:this.labelClasses,style:[this.labelStyle,e.labelStyle,e.active?this.labelActiveStyle:null,e.active?e.labelActiveStyle:null],on:{click:this.labelClickHandle}},[e.label])])}},{key:"marksClasses",get:function(){return["vue-slider-mark",{"vue-slider-mark-active":this.mark.active}]}},{key:"stepClasses",get:function(){return["vue-slider-mark-step",{"vue-slider-mark-step-active":this.mark.active}]}},{key:"labelClasses",get:function(){return["vue-slider-mark-label",{"vue-slider-mark-label-active":this.mark.active}]}}]),i}(l.a);return c([m({required:!0})],t.prototype,"mark",void 0),c([m(Boolean)],t.prototype,"hideLabel",void 0),c([m()],t.prototype,"stepStyle",void 0),c([m()],t.prototype,"stepActiveStyle",void 0),c([m()],t.prototype,"labelStyle",void 0),c([m()],t.prototype,"labelActiveStyle",void 0),t=c([h.a],t),t}(),V=B,z=function(t){return"number"===typeof t?"".concat(t,"px"):t},U=function(t){var e=document.documentElement,i=document.body,r=t.getBoundingClientRect(),n={y:r.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||i.clientTop||0),x:r.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||i.clientLeft||0)};return n},q=function(t,e,i){var r="targetTouches"in t?t.targetTouches[0]:t,n=U(e),o={x:r.pageX-n.x,y:r.pageY-n.y};return{x:i?e.offsetWidth-o.x:o.x,y:i?e.offsetHeight-o.y:o.y}};(function(t){t[t["PAGE_UP"]=33]="PAGE_UP",t[t["PAGE_DOWN"]=34]="PAGE_DOWN",t[t["END"]=35]="END",t[t["HOME"]=36]="HOME",t[t["LEFT"]=37]="LEFT",t[t["UP"]=38]="UP",t[t["RIGHT"]=39]="RIGHT",t[t["DOWN"]=40]="DOWN"})(H||(H={}));var W=function(t,e){if(e.hook){var i=e.hook(t);if("function"===typeof i)return i;if(!i)return null}switch(t.keyCode){case H.UP:return function(t){return"ttb"===e.direction?t-1:t+1};case H.RIGHT:return function(t){return"rtl"===e.direction?t-1:t+1};case H.DOWN:return function(t){return"ttb"===e.direction?t+1:t-1};case H.LEFT:return function(t){return"rtl"===e.direction?t+1:t-1};case H.END:return function(){return e.max};case H.HOME:return function(){return e.min};case H.PAGE_UP:return function(t){return t+10};case H.PAGE_DOWN:return function(t){return t-10};default:return null}};function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,i){return e&&K(t.prototype,e),i&&K(t,i),t}var Q,Y,J=function(){function t(e){G(this,t),this.num=e}return X(t,[{key:"decimal",value:function(t,e){var i=this.num,r=this.getDecimalLen(i),n=this.getDecimalLen(t),o=0;switch(e){case"+":o=this.getExponent(r,n),this.num=(this.safeRoundUp(i,o)+this.safeRoundUp(t,o))/o;break;case"-":o=this.getExponent(r,n),this.num=(this.safeRoundUp(i,o)-this.safeRoundUp(t,o))/o;break;case"*":this.num=this.safeRoundUp(this.safeRoundUp(i,this.getExponent(r)),this.safeRoundUp(t,this.getExponent(n)))/this.getExponent(r+n);break;case"/":o=this.getExponent(r,n),this.num=this.safeRoundUp(i,o)/this.safeRoundUp(t,o);break;case"%":o=this.getExponent(r,n),this.num=this.safeRoundUp(i,o)%this.safeRoundUp(t,o)/o;break}return this}},{key:"plus",value:function(t){return this.decimal(t,"+")}},{key:"minus",value:function(t){return this.decimal(t,"-")}},{key:"multiply",value:function(t){return this.decimal(t,"*")}},{key:"divide",value:function(t){return this.decimal(t,"/")}},{key:"remainder",value:function(t){return this.decimal(t,"%")}},{key:"toNumber",value:function(){return this.num}},{key:"getDecimalLen",value:function(t){var e="".concat(t).split("e");return("".concat(e[0]).split(".")[1]||"").length-(e[1]?+e[1]:0)}},{key:"getExponent",value:function(t,e){return Math.pow(10,void 0!==e?Math.max(t,e):t)}},{key:"safeRoundUp",value:function(t,e){return Math.round(t*e)}}]),t}();function Z(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function tt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(i),!0).forEach((function(e){mt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function et(t,e){return nt(t)||rt(t,e)||at(t,e)||it()}function it(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(i.push(s.value),e&&i.length===e)break}catch(c){n=!0,o=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}}function nt(t){if(Array.isArray(t))return t}function ot(t){return ut(t)||ct(t)||at(t)||st()}function st(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function at(t,e){if(t){if("string"===typeof t)return lt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?lt(t,e):void 0}}function ct(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function ut(t){if(Array.isArray(t))return lt(t)}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e,i){return e&&ht(t.prototype,e),i&&ht(t,i),t}function mt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(function(t){t[t["VALUE"]=1]="VALUE",t[t["INTERVAL"]=2]="INTERVAL",t[t["MIN"]=3]="MIN",t[t["MAX"]=4]="MAX",t[t["ORDER"]=5]="ORDER"})(Y||(Y={}));var ft=(Q={},mt(Q,Y.VALUE,'The type of the "value" is illegal'),mt(Q,Y.INTERVAL,'The prop "interval" is invalid, "(max - min)" must be divisible by "interval"'),mt(Q,Y.MIN,'The "value" must be greater than or equal to the "min".'),mt(Q,Y.MAX,'The "value" must be less than or equal to the "max".'),mt(Q,Y.ORDER,'When "order" is false, the parameters "minRange", "maxRange", "fixed", "enabled" are invalid.'),Q),gt=function(){function t(e){dt(this,t),this.dotsPos=[],this.dotsValue=[],this.cacheRangeDir={},this.data=e.data,this.max=e.max,this.min=e.min,this.interval=e.interval,this.order=e.order,this.marks=e.marks,this.included=e.included,this.process=e.process,this.adsorb=e.adsorb,this.dotOptions=e.dotOptions,this.onError=e.onError,this.order?(this.minRange=e.minRange||0,this.maxRange=e.maxRange||0,this.enableCross=e.enableCross,this.fixed=e.fixed):((e.minRange||e.maxRange||!e.enableCross||e.fixed)&&this.emitError(Y.ORDER),this.minRange=0,this.maxRange=0,this.enableCross=!0,this.fixed=!1),this.setValue(e.value)}return pt(t,[{key:"setValue",value:function(t){var e=this;this.setDotsValue(Array.isArray(t)?this.order?ot(t).sort((function(t,i){return e.getIndexByValue(t)-e.getIndexByValue(i)})):ot(t):[t],!0)}},{key:"setDotsValue",value:function(t,e){this.dotsValue=t,e&&this.syncDotsPos()}},{key:"setDotsPos",value:function(t){var e=this,i=this.order?ot(t).sort((function(t,e){return t-e})):t;this.dotsPos=i,this.setDotsValue(i.map((function(t){return e.getValueByPos(t)})),this.adsorb)}},{key:"getValueByPos",value:function(t){var e=this.parsePos(t);if(this.included){var i=100;this.markList.forEach((function(r){var n=Math.abs(r.pos-t);n<i&&(i=n,e=r.value)}))}return e}},{key:"syncDotsPos",value:function(){var t=this;this.dotsPos=this.dotsValue.map((function(e){return t.parseValue(e)}))}},{key:"getRecentDot",value:function(t){var e=this.dotsPos.map((function(e){return Math.abs(e-t)}));return e.indexOf(Math.min.apply(Math,ot(e)))}},{key:"getIndexByValue",value:function(t){return this.data?this.data.indexOf(t):new J(+t).minus(this.min).divide(this.interval).toNumber()}},{key:"getValueByIndex",value:function(t){return t<0?t=0:t>this.total&&(t=this.total),this.data?this.data[t]:new J(t).multiply(this.interval).plus(this.min).toNumber()}},{key:"setDotPos",value:function(t,e){t=this.getValidPos(t,e).pos;var i=t-this.dotsPos[e];if(i){var r=new Array(this.dotsPos.length);this.fixed?r=this.getFixedChangePosArr(i,e):this.minRange||this.maxRange?r=this.getLimitRangeChangePosArr(t,i,e):r[e]=i,this.setDotsPos(this.dotsPos.map((function(t,e){return t+(r[e]||0)})))}}},{key:"getFixedChangePosArr",value:function(t,e){var i=this;return this.dotsPos.forEach((function(r,n){if(n!==e){var o=i.getValidPos(r+t,n),s=o.pos,a=o.inRange;a||(t=Math.min(Math.abs(s-r),Math.abs(t))*(t<0?-1:1))}})),this.dotsPos.map((function(e){return t}))}},{key:"getLimitRangeChangePosArr",value:function(t,e,i){var r=this,n=[{index:i,changePos:e}],o=e;return[this.minRange,this.maxRange].forEach((function(s,a){if(!s)return!1;var c=0===a,u=e>0,l=0;l=c?u?1:-1:u?-1:1;var d=function(t,e){var i=Math.abs(t-e);return c?i<r.minRangeDir:i>r.maxRangeDir},h=i+l,p=r.dotsPos[h],m=t;while(r.isPos(p)&&d(p,m)){var f=r.getValidPos(p+o,h),g=f.pos;n.push({index:h,changePos:g-p}),h+=l,m=g,p=r.dotsPos[h]}})),this.dotsPos.map((function(t,e){var i=n.filter((function(t){return t.index===e}));return i.length?i[0].changePos:0}))}},{key:"isPos",value:function(t){return"number"===typeof t}},{key:"getValidPos",value:function(t,e){var i=this.valuePosRange[e],r=!0;return t<i[0]?(t=i[0],r=!1):t>i[1]&&(t=i[1],r=!1),{pos:t,inRange:r}}},{key:"parseValue",value:function(t){if(this.data)t=this.data.indexOf(t);else if("number"===typeof t||"string"===typeof t){if(t=+t,t<this.min)return this.emitError(Y.MIN),0;if(t>this.max)return this.emitError(Y.MAX),0;if("number"!==typeof t||t!==t)return this.emitError(Y.VALUE),0;t=new J(t).minus(this.min).divide(this.interval).toNumber()}var e=new J(t).multiply(this.gap).toNumber();return e<0?0:e>100?100:e}},{key:"parsePos",value:function(t){var e=Math.round(t/this.gap);return this.getValueByIndex(e)}},{key:"isActiveByPos",value:function(t){return this.processArray.some((function(e){var i=et(e,2),r=i[0],n=i[1];return t>=r&&t<=n}))}},{key:"getValues",value:function(){if(this.data)return this.data;for(var t=[],e=0;e<=this.total;e++)t.push(new J(e).multiply(this.interval).plus(this.min).toNumber());return t}},{key:"getRangeDir",value:function(t){return t?new J(t).divide(new J(this.data?this.data.length-1:this.max).minus(this.data?0:this.min).toNumber()).multiply(100).toNumber():100}},{key:"emitError",value:function(t){this.onError&&this.onError(t,ft[t])}},{key:"getDotRange",value:function(t,e,i){if(!this.dotOptions)return i;var r=Array.isArray(this.dotOptions)?this.dotOptions[t]:this.dotOptions;return r&&void 0!==r[e]?this.parseValue(r[e]):i}},{key:"markList",get:function(){var t=this;if(!this.marks)return[];var e=function(e,i){var r=t.parseValue(e);return tt({pos:r,value:e,label:e,active:t.isActiveByPos(r)},i)};return!0===this.marks?this.getValues().map((function(t){return e(t)})):"[object Object]"===Object.prototype.toString.call(this.marks)?Object.keys(this.marks).sort((function(t,e){return+t-+e})).map((function(i){var r=t.marks[i];return e(i,"string"!==typeof r?r:{label:r})})):Array.isArray(this.marks)?this.marks.map((function(t){return e(t)})):"function"===typeof this.marks?this.getValues().map((function(e){return{value:e,result:t.marks(e)}})).filter((function(t){var e=t.result;return!!e})).map((function(t){var i=t.value,r=t.result;return e(i,r)})):[]}},{key:"processArray",get:function(){if(this.process){if("function"===typeof this.process)return this.process(this.dotsPos);if(1===this.dotsPos.length)return[[0,this.dotsPos[0]]];if(this.dotsPos.length>1)return[[Math.min.apply(Math,ot(this.dotsPos)),Math.max.apply(Math,ot(this.dotsPos))]]}return[]}},{key:"total",get:function(){var t=0;return t=this.data?this.data.length-1:new J(this.max).minus(this.min).divide(this.interval).toNumber(),t-Math.floor(t)!==0?(this.emitError(Y.INTERVAL),0):t}},{key:"gap",get:function(){return 100/this.total}},{key:"minRangeDir",get:function(){return this.cacheRangeDir[this.minRange]?this.cacheRangeDir[this.minRange]:this.cacheRangeDir[this.minRange]=this.getRangeDir(this.minRange)}},{key:"maxRangeDir",get:function(){return this.cacheRangeDir[this.maxRange]?this.cacheRangeDir[this.maxRange]:this.cacheRangeDir[this.maxRange]=this.getRangeDir(this.maxRange)}},{key:"valuePosRange",get:function(){var t=this,e=this.dotsPos,i=[];return e.forEach((function(r,n){i.push([Math.max(t.minRange?t.minRangeDir*n:0,t.enableCross?0:e[n-1]||0,t.getDotRange(n,"min",0)),Math.min(t.minRange?100-t.minRangeDir*(e.length-1-n):100,t.enableCross?100:e[n+1]||100,t.getDotRange(n,"max",100))])})),i}},{key:"dotsIndex",get:function(){var t=this;return this.dotsValue.map((function(e){return t.getIndexByValue(e)}))}}]),t}();function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e,i){return e&&yt(t.prototype,e),i&&yt(t,i),t}var wt=function(){function t(e){vt(this,t),this.states=0,this.map=e}return bt(t,[{key:"add",value:function(t){this.states|=t}},{key:"delete",value:function(t){this.states&=~t}},{key:"toggle",value:function(t){this.has(t)?this.delete(t):this.add(t)}},{key:"has",value:function(t){return!!(this.states&t)}}]),t}();function _t(t,e){return Ct(t)||kt(t,e)||Pt(t,e)||St()}function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],r=!0,n=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(i.push(s.value),e&&i.length===e)break}catch(c){n=!0,o=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}}function Ct(t){if(Array.isArray(t))return t}function xt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ot(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(i),!0).forEach((function(e){$t(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Et(t){return Mt(t)||It(t)||Pt(t)||jt()}function jt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(t,e){if(t){if("string"===typeof t)return At(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?At(t,e):void 0}}function It(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Mt(t){if(Array.isArray(t))return At(t)}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Rt(t){return Rt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ft(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e,i){return e&&Ft(t.prototype,e),i&&Ft(t,i),t}function Nt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}function Lt(t,e){return Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Lt(t,e)}function Ht(t){var e=zt();return function(){var i,r=Ut(t);if(e){var n=Ut(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return Bt(this,i)}}function Bt(t,e){return!e||"object"!==Rt(e)&&"function"!==typeof e?Vt(t):e}function Vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ut(t){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ut(t)}i("4abb");var qt={None:0,Drag:2,Focus:4},Wt=4,Gt=function(){var t=function(t){Nt(i,t);var e=Ht(i);function i(){var t;return Dt(this,i),t=e.apply(this,arguments),t.states=new wt(qt),t.scale=1,t.focusDotIndex=0,t}return Tt(i,[{key:"isObjectData",value:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)}},{key:"isObjectArrayData",value:function(t){return!!t&&Array.isArray(t)&&t.length>0&&"object"===Rt(t[0])}},{key:"onValueChanged",value:function(){this.control&&!this.states.has(qt.Drag)&&this.isNotSync&&(this.control.setValue(this.value),this.syncValueByPos())}},{key:"created",value:function(){this.initControl()}},{key:"mounted",value:function(){this.bindEvent()}},{key:"beforeDestroy",value:function(){this.unbindEvent()}},{key:"bindEvent",value:function(){document.addEventListener("touchmove",this.dragMove,{passive:!1}),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousedown",this.blurHandle),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("mouseleave",this.dragEnd),document.addEventListener("keydown",this.keydownHandle)}},{key:"unbindEvent",value:function(){document.removeEventListener("touchmove",this.dragMove),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousedown",this.blurHandle),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("mouseleave",this.dragEnd),document.removeEventListener("keydown",this.keydownHandle)}},{key:"setScale",value:function(){var t=new J(Math.floor(this.isHorizontal?this.$refs.rail.offsetWidth:this.$refs.rail.offsetHeight));void 0!==this.zoom&&t.multiply(this.zoom),t.divide(100),this.scale=t.toNumber()}},{key:"initControl",value:function(){var t=this;this.control=new gt({value:this.value,data:this.sliderData,enableCross:this.enableCross,fixed:this.fixed,max:this.max,min:this.min,interval:this.interval,minRange:this.minRange,maxRange:this.maxRange,order:this.order,marks:this.sliderMarks,included:this.included,process:this.process,adsorb:this.adsorb,dotOptions:this.dotOptions,onError:this.emitError}),this.syncValueByPos(),["data","enableCross","fixed","max","min","interval","minRange","maxRange","order","marks","process","adsorb","included","dotOptions"].forEach((function(e){t.$watch(e,(function(i){if("data"===e&&Array.isArray(t.control.data)&&Array.isArray(i)&&t.control.data.length===i.length&&i.every((function(e,i){return e===t.control.data[i]})))return!1;switch(e){case"data":case"dataLabel":case"dataValue":t.control.data=t.sliderData;break;case"mark":t.control.marks=t.sliderMarks;break;default:t.control[e]=i}["data","max","min","interval"].indexOf(e)>-1&&t.control.syncDotsPos()}))}))}},{key:"syncValueByPos",value:function(){var t=this.control.dotsValue;this.isDiff(t,Array.isArray(this.value)?this.value:[this.value])&&this.$emit("change",1===t.length?t[0]:Et(t),this.focusDotIndex)}},{key:"isDiff",value:function(t,e){return t.length!==e.length||t.some((function(t,i){return t!==e[i]}))}},{key:"emitError",value:function(t,e){this.silent||console.error("[VueSlider error]: ".concat(e)),this.$emit("error",t,e)}},{key:"dragStartOnProcess",value:function(t){if(this.dragOnClick){this.setScale();var e=this.getPosByEvent(t),i=this.control.getRecentDot(e);if(this.dots[i].disabled)return;this.dragStart(i),this.control.setDotPos(e,this.focusDotIndex),this.lazy||this.syncValueByPos()}}},{key:"dragStart",value:function(t){this.focusDotIndex=t,this.setScale(),this.states.add(qt.Drag),this.states.add(qt.Focus),this.$emit("drag-start",this.focusDotIndex)}},{key:"dragMove",value:function(t){if(!this.states.has(qt.Drag))return!1;t.preventDefault();var e=this.getPosByEvent(t);this.isCrossDot(e),this.control.setDotPos(e,this.focusDotIndex),this.lazy||this.syncValueByPos();var i=this.control.dotsValue;this.$emit("dragging",1===i.length?i[0]:Et(i),this.focusDotIndex)}},{key:"isCrossDot",value:function(t){if(this.canSort){var e=this.focusDotIndex,i=t;if(i>this.dragRange[1]?(i=this.dragRange[1],this.focusDotIndex++):i<this.dragRange[0]&&(i=this.dragRange[0],this.focusDotIndex--),e!==this.focusDotIndex){var r=this.$refs["dot-".concat(this.focusDotIndex)];r&&r.$el&&r.$el.focus(),this.control.setDotPos(i,e)}}}},{key:"dragEnd",value:function(t){var e=this;if(!this.states.has(qt.Drag))return!1;setTimeout((function(){e.lazy&&e.syncValueByPos(),e.included&&e.isNotSync?e.control.setValue(e.value):e.control.syncDotsPos(),e.states.delete(qt.Drag),e.useKeyboard&&!("targetTouches"in t)||e.states.delete(qt.Focus),e.$emit("drag-end",e.focusDotIndex)}))}},{key:"blurHandle",value:function(t){if(!this.states.has(qt.Focus)||!this.$refs.container||this.$refs.container.contains(t.target))return!1;this.states.delete(qt.Focus)}},{key:"clickHandle",value:function(t){if(!this.clickable||this.disabled)return!1;if(!this.states.has(qt.Drag)){this.setScale();var e=this.getPosByEvent(t);this.setValueByPos(e)}}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.states.add(qt.Focus),this.focusDotIndex=t}},{key:"blur",value:function(){this.states.delete(qt.Focus)}},{key:"getValue",value:function(){var t=this.control.dotsValue;return 1===t.length?t[0]:t}},{key:"getIndex",value:function(){var t=this.control.dotsIndex;return 1===t.length?t[0]:t}},{key:"setValue",value:function(t){this.control.setValue(Array.isArray(t)?Et(t):[t]),this.syncValueByPos()}},{key:"setIndex",value:function(t){var e=this,i=Array.isArray(t)?t.map((function(t){return e.control.getValueByIndex(t)})):this.control.getValueByIndex(t);this.setValue(i)}},{key:"setValueByPos",value:function(t){var e=this,i=this.control.getRecentDot(t);if(this.disabled||this.dots[i].disabled)return!1;this.focusDotIndex=i,this.control.setDotPos(t,i),this.syncValueByPos(),this.useKeyboard&&this.states.add(qt.Focus),setTimeout((function(){e.included&&e.isNotSync?e.control.setValue(e.value):e.control.syncDotsPos()}))}},{key:"keydownHandle",value:function(t){var e=this;if(!this.useKeyboard||!this.states.has(qt.Focus))return!1;var i=this.included&&this.marks,r=W(t,{direction:this.direction,max:i?this.control.markList.length-1:this.control.total,min:0,hook:this.keydownHook});if(r){t.preventDefault();var n=-1,o=0;i?(this.control.markList.some((function(t,i){return t.value===e.control.dotsValue[e.focusDotIndex]&&(n=r(i),!0)})),n<0?n=0:n>this.control.markList.length-1&&(n=this.control.markList.length-1),o=this.control.markList[n].pos):(n=r(this.control.getIndexByValue(this.control.dotsValue[this.focusDotIndex])),o=this.control.parseValue(this.control.getValueByIndex(n))),this.isCrossDot(o),this.control.setDotPos(o,this.focusDotIndex),this.syncValueByPos()}}},{key:"getPosByEvent",value:function(t){return q(t,this.$refs.rail,this.isReverse)[this.isHorizontal?"x":"y"]/this.scale}},{key:"renderSlot",value:function(t,e,i,r){var n=this.$createElement,o=this.$scopedSlots[t];return o?r?o(e):n("template",{slot:t},[o(e)]):i}},{key:"render",value:function(){var t=this,e=arguments[0];return e("div",a()([{ref:"container",class:this.containerClasses,style:this.containerStyles,on:{click:this.clickHandle,touchstart:this.dragStartOnProcess,mousedown:this.dragStartOnProcess}},this.$attrs]),[e("div",{ref:"rail",class:"vue-slider-rail",style:this.railStyle},[this.processArray.map((function(i,r){return t.renderSlot("process",i,e("div",{class:"vue-slider-process",key:"process-".concat(r),style:i.style}),!0)})),this.sliderMarks?e("div",{class:"vue-slider-marks"},[this.control.markList.map((function(i,r){var n;return t.renderSlot("mark",i,e("vue-slider-mark",{key:"mark-".concat(r),attrs:{mark:i,hideLabel:t.hideLabel,stepStyle:t.stepStyle,stepActiveStyle:t.stepActiveStyle,labelStyle:t.labelStyle,labelActiveStyle:t.labelActiveStyle},style:(n={},$t(n,t.isHorizontal?"height":"width","100%"),$t(n,t.isHorizontal?"width":"height",t.tailSize),$t(n,t.mainDirection,"".concat(i.pos,"%")),n),on:{pressLabel:function(e){return t.clickable&&t.setValueByPos(e)}}},[t.renderSlot("step",i,null),t.renderSlot("label",i,null)]),!0)}))]):null,this.dots.map((function(i,r){var n;return e("vue-slider-dot",{ref:"dot-".concat(r),key:"dot-".concat(r),attrs:Ot({value:i.value,disabled:i.disabled,focus:i.focus,"dot-style":[i.style,i.disabled?i.disabledStyle:null,i.focus?i.focusStyle:null],tooltip:i.tooltip||t.tooltip,"tooltip-style":[t.tooltipStyle,i.tooltipStyle,i.disabled?i.tooltipDisabledStyle:null,i.focus?i.tooltipFocusStyle:null],"tooltip-formatter":Array.isArray(t.sliderTooltipFormatter)?t.sliderTooltipFormatter[r]:t.sliderTooltipFormatter,"tooltip-placement":t.tooltipDirections[r],role:"slider","aria-valuenow":i.value,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":t.isHorizontal?"horizontal":"vertical",tabindex:"0"},t.dotAttrs),style:[t.dotBaseStyle,(n={},$t(n,t.mainDirection,"".concat(i.pos,"%")),$t(n,"transition","".concat(t.mainDirection," ").concat(t.animateTime,"s")),n)],on:{"drag-start":function(){return t.dragStart(r)}},nativeOn:{focus:function(){return!i.disabled&&t.focus(r)},blur:function(){return t.blur()}}},[t.renderSlot("dot",i,null),t.renderSlot("tooltip",i,null)])})),this.renderSlot("default",{value:this.getValue()},null,!0)])])}},{key:"tailSize",get:function(){return z((this.isHorizontal?this.height:this.width)||Wt)}},{key:"containerClasses",get:function(){return["vue-slider",["vue-slider-".concat(this.direction)],{"vue-slider-disabled":this.disabled}]}},{key:"containerStyles",get:function(){var t=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],e=_t(t,2),i=e[0],r=e[1],n=this.width?z(this.width):this.isHorizontal?"auto":z(Wt),o=this.height?z(this.height):this.isHorizontal?z(Wt):"auto";return{padding:this.contained?"".concat(r/2,"px ").concat(i/2,"px"):this.isHorizontal?"".concat(r/2,"px 0"):"0 ".concat(i/2,"px"),width:n,height:o}}},{key:"processArray",get:function(){var t=this;return this.control.processArray.map((function(e,i){var r,n=_t(e,3),o=n[0],s=n[1],a=n[2];if(o>s){var c=[s,o];o=c[0],s=c[1]}var u=t.isHorizontal?"width":"height";return{start:o,end:s,index:i,style:Ot(Ot((r={},$t(r,t.isHorizontal?"height":"width","100%"),$t(r,t.isHorizontal?"top":"left",0),$t(r,t.mainDirection,"".concat(o,"%")),$t(r,u,"".concat(s-o,"%")),$t(r,"transitionProperty","".concat(u,",").concat(t.mainDirection)),$t(r,"transitionDuration","".concat(t.animateTime,"s")),r),t.processStyle),a)}}))}},{key:"dotBaseStyle",get:function(){var t,e=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],i=_t(e,2),r=i[0],n=i[1];return t=this.isHorizontal?$t({transform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),WebkitTransform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),top:"50%"},"ltr"===this.direction?"left":"right","0"):$t({transform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),WebkitTransform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),left:"50%"},"btt"===this.direction?"bottom":"top","0"),Ot({width:"".concat(r,"px"),height:"".concat(n,"px")},t)}},{key:"mainDirection",get:function(){switch(this.direction){case"ltr":return"left";case"rtl":return"right";case"btt":return"bottom";case"ttb":return"top"}}},{key:"isHorizontal",get:function(){return"ltr"===this.direction||"rtl"===this.direction}},{key:"isReverse",get:function(){return"rtl"===this.direction||"btt"===this.direction}},{key:"tooltipDirections",get:function(){var t=this.tooltipPlacement||(this.isHorizontal?"top":"left");return Array.isArray(t)?t:this.dots.map((function(){return t}))}},{key:"dots",get:function(){var t=this;return this.control.dotsPos.map((function(e,i){return Ot({pos:e,index:i,value:t.control.dotsValue[i],focus:t.states.has(qt.Focus)&&t.focusDotIndex===i,disabled:t.disabled,style:t.dotStyle},(Array.isArray(t.dotOptions)?t.dotOptions[i]:t.dotOptions)||{})}))}},{key:"animateTime",get:function(){return this.states.has(qt.Drag)?0:this.duration}},{key:"canSort",get:function(){return this.order&&!this.minRange&&!this.maxRange&&!this.fixed&&this.enableCross}},{key:"sliderData",get:function(){var t=this;return this.isObjectArrayData(this.data)?this.data.map((function(e){return e[t.dataValue]})):this.isObjectData(this.data)?Object.keys(this.data):this.data}},{key:"sliderMarks",get:function(){var t=this;return this.marks?this.marks:this.isObjectArrayData(this.data)?function(e){var i={label:e};return t.data.some((function(r){return r[t.dataValue]===e&&(i.label=r[t.dataLabel],!0)})),i}:this.isObjectData(this.data)?this.data:void 0}},{key:"sliderTooltipFormatter",get:function(){var t=this;if(this.tooltipFormatter)return this.tooltipFormatter;if(this.isObjectArrayData(this.data))return function(e){var i=""+e;return t.data.some((function(r){return r[t.dataValue]===e&&(i=r[t.dataLabel],!0)})),i};if(this.isObjectData(this.data)){var e=this.data;return function(t){return e[t]}}}},{key:"isNotSync",get:function(){var t=this.control.dotsValue;return Array.isArray(this.value)?this.value.length!==t.length||this.value.some((function(e,i){return e!==t[i]})):this.value!==t[0]}},{key:"dragRange",get:function(){var t=this.dots[this.focusDotIndex-1],e=this.dots[this.focusDotIndex+1];return[t?t.pos:-1/0,e?e.pos:1/0]}}]),i}(l.a);return c([p("change",{default:0})],t.prototype,"value",void 0),c([m({type:Boolean,default:!1})],t.prototype,"silent",void 0),c([m({default:"ltr",validator:function(t){return["ltr","rtl","ttb","btt"].indexOf(t)>-1}})],t.prototype,"direction",void 0),c([m({type:[Number,String]})],t.prototype,"width",void 0),c([m({type:[Number,String]})],t.prototype,"height",void 0),c([m({default:14})],t.prototype,"dotSize",void 0),c([m({default:!1})],t.prototype,"contained",void 0),c([m({type:Number,default:0})],t.prototype,"min",void 0),c([m({type:Number,default:100})],t.prototype,"max",void 0),c([m({type:Number,default:1})],t.prototype,"interval",void 0),c([m({type:Boolean,default:!1})],t.prototype,"disabled",void 0),c([m({type:Boolean,default:!0})],t.prototype,"clickable",void 0),c([m({type:Boolean,default:!1})],t.prototype,"dragOnClick",void 0),c([m({type:Number,default:.5})],t.prototype,"duration",void 0),c([m({type:[Object,Array]})],t.prototype,"data",void 0),c([m({type:String,default:"value"})],t.prototype,"dataValue",void 0),c([m({type:String,default:"label"})],t.prototype,"dataLabel",void 0),c([m({type:Boolean,default:!1})],t.prototype,"lazy",void 0),c([m({type:String,validator:function(t){return["none","always","focus","hover","active"].indexOf(t)>-1},default:"active"})],t.prototype,"tooltip",void 0),c([m({type:[String,Array],validator:function(t){return(Array.isArray(t)?t:[t]).every((function(t){return["top","right","bottom","left"].indexOf(t)>-1}))}})],t.prototype,"tooltipPlacement",void 0),c([m({type:[String,Array,Function]})],t.prototype,"tooltipFormatter",void 0),c([m({type:Boolean,default:!0})],t.prototype,"useKeyboard",void 0),c([m(Function)],t.prototype,"keydownHook",void 0),c([m({type:Boolean,default:!0})],t.prototype,"enableCross",void 0),c([m({type:Boolean,default:!1})],t.prototype,"fixed",void 0),c([m({type:Boolean,default:!0})],t.prototype,"order",void 0),c([m(Number)],t.prototype,"minRange",void 0),c([m(Number)],t.prototype,"maxRange",void 0),c([m({type:[Boolean,Object,Array,Function],default:!1})],t.prototype,"marks",void 0),c([m({type:[Boolean,Function],default:!0})],t.prototype,"process",void 0),c([m({type:[Number]})],t.prototype,"zoom",void 0),c([m(Boolean)],t.prototype,"included",void 0),c([m(Boolean)],t.prototype,"adsorb",void 0),c([m(Boolean)],t.prototype,"hideLabel",void 0),c([m()],t.prototype,"dotOptions",void 0),c([m()],t.prototype,"dotAttrs",void 0),c([m()],t.prototype,"railStyle",void 0),c([m()],t.prototype,"processStyle",void 0),c([m()],t.prototype,"dotStyle",void 0),c([m()],t.prototype,"tooltipStyle",void 0),c([m()],t.prototype,"stepStyle",void 0),c([m()],t.prototype,"stepActiveStyle",void 0),c([m()],t.prototype,"labelStyle",void 0),c([m()],t.prototype,"labelActiveStyle",void 0),c([f("value")],t.prototype,"onValueChanged",null),t=c([h()({data:function(){return{control:null}},components:{VueSliderDot:E,VueSliderMark:V}})],t),t}(),Kt=Gt;Kt.VueSliderMark=V,Kt.VueSliderDot=E;var Xt=Kt;e["default"]=Xt}})["default"]}))},"4a85":function(t,e,i){},"4fce":function(t,e,i){"use strict";var r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("input",{attrs:{type:"range",step:t.step,min:t.min,max:t.max,disabled:t.disabled},domProps:{value:t.value},on:{input:function(e){t.emit(e.target.value)},touchmove:t.touchmove,touchstart:t.touchmove}})},staticRenderFns:[],name:"TouchRange",props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:1},step:{type:[Number,String],default:"any"},disabled:{type:Boolean,default:!1}},computed:{range:function(){return this.max-this.min}},methods:{emit:function(t){this.$emit("input",Number(t))},touchmove:function(t){t.preventDefault();var e=t.target.clientWidth,i=Math.max(0,Math.min(e,t.touches[0].pageX-t.target.offsetLeft))/e;this.emit(i*this.range+this.min)}}};t.exports=r},"57b8":function(t,e,i){},6696:function(t,e,i){"use strict";i("204d")},"669f":function(t,e,i){"use strict";i("4a85")},7591:function(t,e,i){
/*!
 * vue-konva v2.1.7 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */
(function(e,r){t.exports=r(i("2b0e"),i("362d"))})(0,(function(t,e){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(e,i){e.exports=t},function(t,e,i){t.exports=i(3)},function(t,i){t.exports=e},function(t,e,i){"use strict";i.r(e);var r=i(0),n=i.n(r);function o(t){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}var s={key:!0,style:!0,elm:!0,isRootInsert:!0},a=".vue-konva-event";function c(t,e,i,r){void 0===e&&(e={}),void 0===i&&(i={});var n=t._konvaNode,c={},u=!1;for(var l in i)if(!s[l]){var d="on"===l.slice(0,2),h=i[l]!==e[l];if(d&&h){var p=l.substr(2).toLowerCase();"content"===p.substr(0,7)&&(p="content"+p.substr(7,1).toUpperCase()+p.substr(8)),n.off(p+a,i[l])}var m=!e.hasOwnProperty(l);m&&n.setAttr(l,void 0)}for(var f in e)if(!s[f]){var g="on"===f.slice(0,2),v=i[f]!==e[f];if(g&&v){var y=f.substr(2).toLowerCase();"content"===y.substr(0,7)&&(y="content"+y.substr(7,1).toUpperCase()+y.substr(8)),e[f]&&(n.off(y+a),n.on(y+a,e[f]))}!g&&(e[f]!==i[f]||r&&e[f]!==n.getAttr(f))&&(u=!0,c[f]=e[f])}u&&(n.setAttrs(c),o(n))}var u="v",l="_konvaNode";function d(t){var e={};return Object.keys(t).forEach((function(i){e["on"+i]=t[i]})),e}function h(t){function e(t){return t._konvaNode?t:t.$parent?e(t.$parent):{}}return e(t.$parent)}function p(t){return t?t.$options[l]?t.getNode():0===t.$children.length?null:p(t.$children[0]):null}function m(t,e){var i=!1,r=t.componentOptions.children||[],n=[];r.forEach((function(t){var e=p(t.componentInstance);e&&n.push(e);var i=t.elm,r=t.componentInstance;if(i&&i.tagName&&r&&!e){var o=i&&i.tagName.toLowerCase();console.error('vue-konva error: You are trying to render "'+o+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.')}})),n.forEach((function(t,e){t.getZIndex()!==e&&(t.setZIndex(e),i=!0)})),i&&o(e)}function f(){return f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},f.apply(this,arguments)}var g=n.a.component("v-stage",{render:function(t){return t("div",this.$slots.default)},watch:{config:{handler:function(t){this.uploadKonva()},deep:!0}},props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},created:function(){this._konvaNode=new window.Konva.Stage({width:this.config.width,height:this.config.height,container:document.createElement("div")})},mounted:function(){this.$el.innerHTML="",this._konvaNode.container(this.$el),this.uploadKonva(),this.validateChildren()},updated:function(){this.uploadKonva(),this.uploadKonva(),m(this.$vnode,this._konvaNode)},beforeDestroy:function(){this._konvaNode.destroy()},methods:{getNode:function(){return this._konvaNode},getStage:function(){return this._konvaNode},uploadKonva:function(){var t=this.oldProps||{},e=f({},this.$attrs,this.config,d(this.$listeners));c(this,e,t,this.__useStrictMode),this.oldProps=e},validateChildren:function(){}}});function v(){return v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},v.apply(this,arguments)}var y=".vue-konva-event",b={Group:!0,Layer:!0,FastLayer:!0,Label:!0},w=function(t){var e;return e={},e[l]=!0,e.render=function(e){var i=b[t];return i?e("template",this.$slots.default):null},e.watch={config:{handler:function(t){this.uploadKonva()},deep:!0}},e.props={config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},e.created=function(){this.initKonva()},e.mounted=function(){var t=h(this),e=t._konvaNode;e.add(this._konvaNode),o(this._konvaNode)},e.updated=function(){this.uploadKonva(),m(this.$vnode,this._konvaNode)},e.destroyed=function(){o(this._konvaNode),this._konvaNode.destroy(),this._konvaNode.off(y)},e.methods={getNode:function(){return this._konvaNode},getStage:function(){return this._konvaNode},initKonva:function(){var e=window.Konva[t];e?(this._konvaNode=new e,this._konvaNode.VueComponent=this,this.uploadKonva()):console.error("vue-konva error: Can not find node "+t)},uploadKonva:function(){var t=this.oldProps||{},e=v({},this.$attrs,this.config,d(this.$listeners));c(this,e,t,this.__useStrictMode),this.oldProps=e}},e};"undefined"===typeof window||window.Konva||i(2);var _=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],S=[{name:"Stage",component:g}].concat(_.map((function(t){return{name:t,component:w(t)}}))),k={install:function(t,e){var i=u;e&&e.prefix&&(i=e.prefix),S.forEach((function(e){t.component(""+i+e.name,e.component)}))}};e["default"]=k;"undefined"!==typeof window&&window.Vue&&window.Vue.use(k)}])["default"]}))},7788:function(t,e,i){},"794d":function(t,e,i){"use strict";i("fd00")},"7fbd":function(t,e,i){"use strict";i("0cc8")},"86d6":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show||t.isViewerMode?i("div",{ref:"draggableContainer",staticClass:"b-story-wrapper-questionnaire",class:{"m-overlay":t.inputMode},style:t.viewerModeStyles,attrs:{id:"draggable-container"},on:{click:t.clickHandler}},[i("div",{staticClass:"b-story-questionnaire"},[i("div",{staticClass:"b-story-questionnaire__header"},[t.inputMode||t.isViewerMode?t._e():i("button",{staticClass:"b-modal__close m-with-round-hover",attrs:{type:"button"},on:{click:function(e){t.show=!1}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",attrs:{"extra-class":"m-aligned-top"}})]),i("Avatar",{staticClass:"m-border-line-theme",attrs:{"user-id":t.avatarUserId,size:50,"is-link":!1,"hide-online":"","disable-story-functionality":""}})],1),i("form",{staticClass:"b-story-questionnaire__form",attrs:{action:"#"}},[i("div",{staticClass:"b-story-questionnaire__title"},[t.isViewerMode?i("span",{staticClass:"b-story-questionnaire__title-text",domProps:{textContent:t._s(t.questionText)}}):i("input-o-f",{staticClass:"b-story-questionnaire__input",attrs:{autofocus:"",type:"textarea",autocomplete:"story-question-input",maxlength:60,autogrow:"",placeholder:t.$t("message.ask_me_question"),outlined:!1,"row-height":30,"max-rows-count":3,"max-col-count":20},on:{focus:function(e){t.inputMode=!0},blur:t.onBlur,scroll:t.onscrollTrottled},model:{value:t.question,callback:function(e){t.question=e},expression:"question"}})],1),i("div",{staticClass:"b-story-questionnaire__field"},[i("input-o-f",{ref:"answerInput",staticClass:"b-story-questionnaire__input",attrs:{disabled:!t.isViewerMode,type:"textarea",autocomplete:"story-answer-input",maxlength:60,"max-col-count":20,autogrow:"",placeholder:t.$t("message.write_something"),outlined:!1,"row-height":20,"max-rows-count":3},on:{focus:t.onAnswerInputFocus,blur:t.onAnswerInputBlur,scroll:t.onscrollTrottled},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1),t.isViewerMode&&t.inputMode&&t.answer?i("div",{staticClass:"b-story-questionnaire__submit-field"},[i("button",{staticClass:"b-story-questionnaire__submit-btn",attrs:{type:"button"},on:{click:t.sendStoryAnswer}},[t._v(" "+t._s(t.$t("message.send_button"))+" ")])]):t._e()])])]):t._e()},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),s=i("2ef0"),a=i("d634"),c=i("b48d"),u=i("13ca"),l=i("ad4d");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var p={name:"StoryQestion",components:{Avatar:c["a"],InputOF:u["a"]},props:{isViewerMode:{type:Boolean,default:!1},currentStory:{type:Object,default:null},onAnswerFocus:{type:Function,default:function(){}},onAnswerBlur:{type:Function,default:function(){}},image:{type:HTMLImageElement,default:null}},data:function(){return{show:!1,inputMode:!1,questionModel:"",top:0,left:0,answer:"",hasSentAnswer:!1}},computed:h(h({},Object(a["b"])(["authUserId"])),{},{question:{set:function(t){this.questionModel=t.trim()},get:function(){return this.questionModel}},onscrollTrottled:function(){return Object(s["throttle"])(this.onScroll,20)},questionProp:function(){return Object(s["get"])(this,"currentStory.question")},viewerModeStyles:function(){if(this.questionProp&&this.isViewerMode&&!this.inputMode){var t=this.currentStory,e=t.bgPreviewWidth,i=t.bgPreviewHeight,r=e/i<=1,n=r?.5*e:.25*e,o=this.questionProp.positions,s=(window.innerHeight-i)/2,a=(window.innerWidth-e)/2,c=o.x/1e5*e+a,u=o.y/1e5*i+s,l=n/300;return{left:"".concat(c,"px"),top:"".concat(u,"px"),transform:"scale(".concat(l,")"),"transform-origin":"top left"}}return null},avatarUserId:function(){return this.isViewerMode&&this.questionProp?Object(s["get"])(this,"currentStory.userId"):this.authUserId},questionText:function(){if(this.isViewerMode&&this.questionProp)return this.questionProp.entity.text},sendStoryAnswerTrottled:function(){return Object(s["throttle"])(this.sendStoryAnswer,1e3)}}),watch:{question:function(){this.updateData()},inputMode:function(){var t=document.querySelector(".konvajs-content canvas");l["a"]&&!this.isViewerMode&&t&&(this.inputMode?t.addEventListener("touchstart",this.onBlur):t.removeEventListener("touchstart",this.onBlur))}},mounted:function(){this.$root.$imageEditor&&this.$root.$imageEditor.events&&(this.$root.$imageEditor.events.$root.$on("imageEditor::question::focus",this.onFocus),this.$root.$imageEditor.events.$root.$on("imageEditor::question::updateCoords",this.onPositionUpdate),this.$root.$imageEditor.events.$root.$on("imageEditor::question::remove",this.removeQuestion))},beforeDestroy:function(){this.$root.$imageEditor&&this.$root.$imageEditor.events&&(this.$root.$imageEditor.events.$root.$off("imageEditor::question::focus",this.onFocus),this.$root.$imageEditor.events.$root.$off("imageEditor::question::updateCoords",this.onPositionUpdate),this.$root.$imageEditor.events.$root.$off("imageEditor::question::remove",this.removeQuestion))},methods:{onFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.show=!0,this.inputMode=!0,t.reset&&(this.question="")},onPositionUpdate:function(t){this.left=t.x,this.top=t.y,this.updateData()},clickHandler:function(){if(this.isViewerMode&&!this.inputMode){var t=Object(s["get"])(this,"$refs.answerInput.$refs.textarea");t&&t.focus()}},updateData:function(){this.$root.$emit("imageEditor::question::update",{text:this.question||this.$t("message.ask_me_question"),x:Math.round(1e5*this.left),y:Math.round(1e5*this.top)})},removeQuestion:function(){this.$root.$emit("imageEditor::question::update",{})},onBlur:function(){this.$root.$imageEditor.events.$emit("imageEditor::question::blur",this.question),this.show=!1,this.inputMode=!1},onScroll:function(t,e){var i=e||t.target;i.scrollTop>0&&(this.question=this.question.slice(0,-1),this.onscrollTrottled(void 0,i))},onAnswerInputFocus:function(){this.inputMode=!0,this.onAnswerFocus()},onAnswerInputBlur:function(){var t=this;setTimeout((function(){t.inputMode=!1,t.onAnswerBlur()}),200)},sendStoryAnswer:function(){this.answer&&(this.$emit("send-story-answer",{text:this.answer}),this.answer="")}}},m=p,f=i("2877"),g=Object(f["a"])(m,r,n,!1,null,null,null);e["a"]=g.exports},"8d4a":function(t,e,i){},9057:function(t,e,i){},"95c5":function(t,e,i){"use strict";i("9057")},b17b:function(t,e,i){"use strict";i("c41d")},b8d0:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"l-stories m-disable-selection",class:{"with-cube":t.options.cubeEffect,"with-effects":t.options.openEffect,"m-animated":t.showModalContent},attrs:{tabIndex:"1"}},[t.showModalContent?[i("div",{staticClass:"b-invisible-btn m-username",on:{click:t.goToProfile}}),i("div",{staticClass:"b-invisible-btn m-close",on:{click:t.closeStory}}),i("swiper",{ref:"slider",staticClass:"slider",attrs:{options:t.swiperOptions},on:{slideChange:t.onSlideChange,touchStart:t.touchStartHandler,touchEnd:t.touchEndHandler}},t._l(t.stories,(function(e,r){return i("swiper-slide",{key:e.id,attrs:{id:e.id}},[i("item",{ref:"currentStorySetItem",refInFor:!0,attrs:{"should-video-be-muted":t.shouldVideoBeMuted,status:t.currentUserIndex===r?t.status:"hold",user:e,"story-items":e.items,"close-story":t.closeStory,percent:t.currentUserIndex===r?t.percent:0,"current-story-index":t.currentStoryIndex,"go-to-profile":t.goToProfile,"go-to-specific":t.goToSpecific,"real-story-id":t.realStoryId}})],1)})),1),t.shouldVideoBeMuted&&t.isVideo&&t.isReady&&"gif"!==t.mediaType?i("b",{staticClass:"tip muted",on:{click:t.unmuteVideoItem}},[t._v(" "+t._s(t.$t("message.touch_to_unmute_button"))+" ")]):t._e(),t.percent>0&&t.percent<99?i(t.panelComponent,{tag:"component",attrs:{title:t.title,type:t.type,"user-id":t.userId,"real-story-id":t.realStoryId,close:t.closeStory,"play-story":t.startProgress,"pause-story":t.pauseProgress,"remove-story":t.removeStory,"remove-highlight":t.removeHighlight,"show-stats":t.showStats,"edit-highlight":t.editHighlight,"current-story":t.currentStory,action:t.action,"is-ready":t.isReady},on:{"open-comment-form":function(e){return t.isOpenCommentForm=e},"open-modal-content":function(e){return t.isOpenModalContent=e},"open-menu-content":function(e){return t.isOpenMenuContent=e}}}):t._e(),t.currentStory.question&&t.percent>0&&t.percent<99&&t.isReady?i("question",{attrs:{"current-story":t.currentStory,"is-viewer-mode":"","on-answer-focus":function(){t.questionOnFocus=!0,t.pauseProgress()},"on-answer-blur":function(){t.questionOnFocus=!1,t.startProgress()},image:t.get(this,["$refs","currentStorySetItem",t.currentUserIndex,"$refs","imageBg"])},on:{"send-story-answer":t.sendStoryAnswer}}):t._e()]:t._e()],2)},n=[],o=(i("8e6e"),i("ac6a"),i("456d"),i("20d6"),i("96cf"),i("3b8d")),s=i("bd86"),a=i("2ef0"),c=i("d634"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.currentStory?i("div",{staticClass:"b-action-panel m-shadow-gradient type-owner"},[t.isReady?[i("span",{staticClass:"b-action-panel__item m-free-size"},[i("span",{staticClass:"b-action-panel__el m-likes js-streaming__btn-likes__viewer m-fluid-width"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.likes_button"),classes:"m-tooltip-light"},expression:"{content: $t('message.likes_button'), classes: 'm-tooltip-light' }"}],staticClass:"icon-like"}),i("span",{staticClass:"b-action-panel__el__text"},[t._v(" "+t._s(t.currentStory.likesCount)+" ")])])]),t.currentStory.tipsAmount&&t.authUser.tipsEnabled?i("span",{staticClass:"b-action-panel__item m-free-size"},[i("span",{staticClass:"b-action-panel__el m-tips js-streaming__btn-tips__viewer m-fluid-width"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.tooltip_tips"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_tips'), classes: 'm-tooltip-light' }"}],staticClass:"icon-funds"}),i("span",{staticClass:"b-action-panel__el__text"},[t._v(" "+t._s(t.currentStory.tipsAmount)+" ")])])]):t._e(),i("span",{staticClass:"b-action-panel__item  m-space-distance m-right-part m-free-size m-online js-streaming__online",on:{click:t.showStats}},[i("span",{staticClass:"b-action-panel__el m-fluid-width m-with-round-hover m-light m-width-fluid-hover"},[i("span",{staticClass:"b-action-panel__el__text js-streaming__actions__count__value"},[t._v(" "+t._s(t.currentStory.viewersCount)+" ")]),t.currentStory.viewers&&t.currentStory.viewers.length?t._e():i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.tooltip_viewers"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_viewers'), classes: 'm-tooltip-light' }"}],staticClass:"icon-eye"}),i("span",{staticClass:"group-avatars"},t._l(t.viewers,(function(t){return i("avatar",{key:t.id,staticClass:"m-border-line",attrs:{user:t,size:24,"is-link":!1,"hide-online":""}})})),1)])])]:t._e(),i("div",{staticClass:"b-action-panel__item m-free-size m-right-part m-dots-btn",class:{"m-space-distance m-right-part":!t.isReady}},["currentHighlights"===t.type?i("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"m-size-lg m-light m-not-width-limit m-center",variant:"link",offset:"4"},on:{hide:t.menuHide,show:t.menuShow},scopedSlots:t._u([{key:"button-content",fn:function(){return[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]},proxy:!0}],null,!1,1222578733)},[i("b-dropdown-item-button",{on:{click:t.editHighlight}},[t._v(" "+t._s(t.$t("message.edit_highlight"))+" ")]),i("b-dropdown-item-button",{on:{click:t.removeHighlight}},[t._v(" "+t._s(t.$t("message.remove_highlight"))+" ")])],1):i("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"m-size-lg m-light m-not-width-limit m-center",variant:"link",offset:"4"},on:{hide:t.menuHide,show:t.menuShow},scopedSlots:t._u([{key:"button-content",fn:function(){return[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]},proxy:!0}],null,!1,1222578733)},[i("b-dropdown-item-button",{on:{click:t.remove}},[t._v(" "+t._s(t.$t("message.uploaded_media_delete_btn_title"))+" ")]),t.isReady?i("b-dropdown-item-button",{on:{click:function(e){return t.addStoryToHighlight(t.realStoryId)}}},[t._v(" "+t._s(t.$t("message.add_to_highlight"))+" ")]):t._e()],1)],1),t.title?i("div",{staticClass:"b-story-name"},[t._v(" "+t._s(t.title)+" ")]):t._e(),i("add-story-to-highlight-modal",{on:{hide:t.playStory}})],2):t._e()},l=[],d=(i("7514"),i("28a5"),i("768b")),h=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{id:"add-story-to-highlight-modal",centered:"","modal-class":"story-highlights","dialog-class":"story-highlights-dialog m-modal-lg-mob","content-class":"story-highlights-content","header-class":"m-border-header","footer-class":"m-border-footer"},on:{hide:t.backBtnClick},scopedSlots:t._u([{key:"modal-header",fn:function(){return[i("h4",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("message.add_to_highlight"))+" ")])]},proxy:!0},{key:"modal-footer",fn:function(){return[i("button",{staticClass:"g-btn m-flat m-btn-gaps m-reset-width",on:{click:t.backBtnClick}},[t._v(" "+t._s(t.$t("message.button_label_cancel"))+" ")]),i("button",{staticClass:"g-btn m-flat m-btn-gaps m-reset-width",attrs:{disabled:0===t.selected&&!t.title},on:{click:t.save}},[t._v(" "+t._s(t.$t("message.save"))+" ")])]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[0===t.selected?i("input-o-f",{attrs:{label:t.$t("message.highlights_placeholder_label"),autocomplete:"story-highlight-input",autofocus:"",maxlength:70,counter:70,required:"",name:"name"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}):t._e(),i("div",{staticClass:"b-wrapper-highlights b-scrolled-modal-content m-native-custom-scrollbar m-name-highlights-step m-scrollbar-y"},[i("div",{staticClass:"b-photos m-highlights-wrapper"},[i("div",{staticClass:"b-photos__item m-square m-highlight m-checkbox-control b-story-item m-create selected",class:{checked:0===t.selected},on:{click:function(e){t.selected=0}}},[i("div",{staticClass:"b-story-item__inside"},[i("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar m-absolute"},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-highlights"})]),i("div",{staticClass:"b-story-item__text"},[t._v(" "+t._s(t.$t("message.new_highlight"))+" ")])])]),t._l(t.highlights,(function(e){return i("div",{key:e.id,staticClass:"b-photos__item m-square m-highlight m-checkbox-control m-default-bg b-story-item m-gradient-overlay selected",class:{checked:t.selected===e.id},on:{click:function(i){t.selected=e.id}}},[i("div",{staticClass:"b-story-item__inside m-default-bg"},[i("div",{staticClass:"b-story-item__text"},[i("div",{staticClass:"b-story-item__text-name"},[t._v(" "+t._s(t._f("encodeHtml")(e.title))+" ")])]),i("img",{staticClass:"img-responsive",attrs:{src:e.cover,draggable:"false",alt:""}})])])}))],2)])],1)}),p=[],m=i("13ca");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var v={components:{InputOF:m["a"]},data:function(){return{show:!1,selected:0,title:"",storyId:void 0}},computed:g(g({},Object(c["Rb"])(["highlights"])),Object(c["b"])(["authUser"])),mounted:function(){var t=this;this.$root.$on("show-add-story-to-highlight-modal",(function(e){var i=e.storyId;t.show=!0,t.storyId=i,t.fetchUserHighlights({userId:t.authUser.id})}))},methods:g(g({},Object(c["Qb"])(["fetchUserHighlights","saveHighlights","patchHighlight","fetchMyStories"])),{},{backBtnClick:function(){this.show=!1,this.$emit("hide")},save:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$window.showPreloader(),0!==this.selected){t.next=9;break}return t.next=4,this.saveHighlights({title:this.title,storyIds:[this.storyId],coverStoryId:this.storyId});case 4:return e=this.$t("message.highlight_was_created"),t.next=7,this.fetchUserHighlights({userId:this.authUser.id});case 7:t.next=12;break;case 9:return t.next=11,this.patchHighlight({highlightId:this.selected,storyIds:[this.storyId]});case 11:e=this.$t("message.story_added_to_highlight");case 12:return t.next=14,this.fetchMyStories();case 14:this.$bvToast.toast(e,{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}),this.show=!1,this.$window.hidePreloader();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setSelected:function(t){this.stories=this.stories.map((function(e){return e.id!==t.id?e:g(g({},e),{},{selected:!e.selected})}))}})},y=v,b=i("2877"),w=Object(b["a"])(y,h,p,!1,null,null,null),_=w.exports,S=i("b48d");function k(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?k(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var x={components:{Avatar:S["a"],AddStoryToHighlightModal:_},props:{currentStory:{type:Object,required:!0},realStoryId:{type:[String,Number],required:!0},removeStory:{type:Function,required:!0},removeHighlight:{type:Function,required:!0},showStats:{type:Function,required:!0},editHighlight:{type:Function,required:!0},type:{type:String,required:!0},title:{type:String,default:void 0},pauseStory:{type:Function,required:!0},playStory:{type:Function,required:!0},close:{type:Function,required:!0},action:{type:String,default:""},isReady:{type:Boolean,required:!0}},data:function(){return{deleteStoryConfirm:{type:"highlight",story:{}}}},computed:C(C(C({},Object(c["Rb"])(["myStories","currentHighlights","storyFromArchive","userStories"])),Object(c["b"])(["authUser"])),{},{viewers:function(){return Object(a["get"])(this,"currentStory.viewers.length")?this.currentStory.viewers.filter((function(t,e){return e<3})):[]},isVideo:function(){var t=Object(a["get"])(this,"currentStory.media[0].type");return"video"===t},deleteStoryConfirmTitle:function(){return"highlight"===this.deleteStoryConfirm.type?this.$t("message.story_remove_confirm"):this.$t("message.story_remove_confirm_cover")}}),watch:{realStoryId:function(){this.$refs.postDropdown.hide()}},mounted:function(){if(this.action){var t=this.action.split("::"),e=Object(d["a"])(t,2),i=e[0],r=e[1];"statistic"===i&&this.showStats(r)}},methods:{deleteStoryConfirmShow:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.interact(this.deleteStoryConfirmTitle,{confirmText:this.$t("message.remove")});case 2:e=t.sent,e?this.removeStory():this.onConfirmClose();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),remove:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.myStories.find((function(t){return t.id===n.currentStory.id}))||{},i=e.isHighlightCover,r=e.isLastInHighlight,!i&&!r){t.next=6;break}setTimeout((function(){n.deleteStoryConfirm.type=r?"highlight":"cover",n.deleteStoryConfirmShow(),n.pauseStory()})),t.next=8;break;case 6:return t.next=8,this.removeStory();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onConfirmClose:function(){this.deleteStoryConfirm.type=null,this.playStory()},menuShow:function(){this.pauseStory()},menuHide:function(){this.playStory()},addStoryToHighlight:function(t){var e=this;setTimeout((function(){e.pauseStory(),e.$root.$emit("show-add-story-to-highlight-modal",{storyId:t})}),100)}}},O=x,$=Object(b["a"])(O,u,l,!1,null,null,null),E=$.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"b-action-panel m-shadow-gradient type-guest",class:{"m-comment-form-visible":t.showComment}},[i("div",{staticClass:"b-streaming__actions__overlay"}),t.currentStory.canLike?i("span",{staticClass:"b-action-panel__item m-free-size m-visible-desk",class:{"m-hidden-comments":t.showComment}},[i("button",{staticClass:"b-action-panel__el m-likes m-with-round-hover m-light",class:{active:t.isLiked},attrs:{type:"button",disabled:t.disabledLike},on:{click:t.likeHandleThrottled}},[t.isLiked?i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.post_like_button_title_unlike"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_unlike'), classes: 'm-tooltip-light' }"}],staticClass:"icon-liked"}):i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.post_like_button_title_like"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_like'), classes: 'm-tooltip-light' }"}],staticClass:"icon-like"})])]):t._e(),t.canCommentStory?i("div",{staticClass:"b-action-panel__item m-free-size m-comments-form"},[i("button",{staticClass:"b-action-panel__el m-comments m-with-round-hover m-light",attrs:{type:"button"},on:{click:t.showCommentForm}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.reply_story"),classes:"m-tooltip-light"},expression:"{content: $t('message.reply_story'), classes: 'm-tooltip-light' }"}],staticClass:"icon-message"})]),t.showComment?i("form",{staticClass:"b-comment-form m-field-line js-streaming__comment-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],ref:"commentInput",staticClass:"form-control b-comment-form__input",attrs:{placeholder:t.$t("message.reply_story"),maxlength:"140",tabindex:"1"},domProps:{value:t.commentText},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.preventDefault(),e.stopPropagation()},focus:function(t){t.preventDefault(),t.stopPropagation()},blur:t.onBlur,input:function(e){e.target.composing||(t.commentText=e.target.value)}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.send_form"),classes:"m-tooltip-light"},expression:"{content: $t('message.send_form'), classes: 'm-tooltip-light' }"}],staticClass:"b-comment-form__submit g-btn m-rounded m-colored m-icon m-icon-only m-default-color m-sm-size",attrs:{disabled:!t.commentText.length||t.disabledComment},on:{click:function(e){return e.preventDefault(),t.submitCommentThrottled(e)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-send"})])]):t._e()]):t._e(),t.storyUser.tipsEnabled?i("span",{staticClass:"b-action-panel__item",class:{"m-right-part":t.showCommentForm,"m-free-size":!t.showCommentForm&&t.$mq.includes("sm")||!t.$mq.includes("sm")}},[i("button",{staticClass:"b-action-panel__el m-tips js-streaming__btn-tips__viewer m-with-round-hover m-light",class:{"m-fluid-width m-width-fluid-hover":!t.showComment},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showTipsForm(e)}}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),i("span",{staticClass:"b-action-panel__el__text",class:{"m-hidden-comments":t.showComment}},[t._v(" "+t._s(t.$t("message.send_tips"))+" ")])])]):t._e(),i("div",{staticClass:"b-action-panel__item m-free-size m-space-distance m-right-part m-dots-btn"},[i("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"m-size-lg m-light m-not-width-limit m-center",variant:"link",offset:"4"},on:{hide:t.menuHide,show:t.menuShow},scopedSlots:t._u([{key:"button-content",fn:function(){return[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:t.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]},proxy:!0}])},[i("b-dropdown-item-button",{on:{click:t.openReportModal}},[t._v(" "+t._s(t.$t("message.report"))+" ")])],1)],1),t.title?i("div",{staticClass:"b-story-name"},[t._v(" "+t._s(t.title)+" ")]):t._e()])},P=[];function I(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function M(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?I(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var A={props:{realStoryId:{type:[String,Number],required:!0},type:{type:String,default:"userStories"},title:{type:String,default:void 0},close:{type:Function,required:!0},userId:{type:Number,required:!0},pauseStory:{type:Function,required:!0},playStory:{type:Function,required:!0},action:{type:String,default:""}},data:function(){return{showComment:!1,commentText:"",pauseTimeout:void 0,disabledLike:!1,disabledComment:!1,openModalContent:!1,openMenu:!1}},computed:M(M(M(M({},Object(c["Rb"])(["stories","userStories","chatStory","currentHighlights"])),Object(c["b"])(["authUser"])),Object(c["tc"])(["getUser"])),{},{storyUser:function(){return this.currentStory.userId?this.getUser(this.currentStory.userId):{}},canCommentStory:function(){return this.storyUser.canCommentStory},storiesList:function(){var t=this;switch(!0){case"chatStory"===this.type:return[this.chatStory];case"currentHighlights"===this.type:return this.currentHighlights.stories;case"stories"===this.type:var e=this.stories.find((function(e){return e.user&&e.user.id==t.userId}));return e?e.stories:[];case"userStories"===this.type:return this.userStories;default:return[]}},currentStory:function(){var t=this;if(this.storiesList&&this.storiesList.length){var e=this.storiesList.find((function(e){return e.id==t.realStoryId}));return e||{}}return{}},isLiked:function(){return this.currentStory.isLiked},submitCommentThrottled:function(){return Object(a["throttle"])(this.submitComment,1e3)},likeHandleThrottled:function(){return Object(a["throttle"])(this.likeHandle,1e3)},isVideo:function(){var t=Object(a["get"])(this,"currentStory.media[0].type");return"video"===t}}),watch:{showComment:function(t){this.$emit("open-comment-form",t)},openModalContent:function(t){this.$emit("open-modal-content",t)},openMenu:function(t){this.$emit("open-menu-content",t)},realStoryId:function(){this.$refs.postDropdown.hide()}},mounted:function(){if(this.$root.$on("bv::show::modal",this.onOpenModalContentHandler),this.$root.$on("bv::hide::modal",this.onCloseModalContentHandler),this.$root.$on("bv::modal::hide",this.onCloseModalContentHandler),this.$root.$on("modal::tips::close",this.onCloseModalContentHandler),this.$root.$on("payment::start",this.onOpenModalContentHandler),this.$root.$on("payment::end",this.onCloseModalContentHandler),this.action){var t=this.action.split("::"),e=Object(d["a"])(t,2),i=e[0],r=e[1];"tips"===i&&"open"===r&&this.showTipsForm()}},beforeDestroy:function(){this.$root.$off("bv::show::modal",this.onOpenModalContentHandler),this.$root.$off("bv::hide::modal",this.onCloseModalContentHandler),this.$root.$off("bv::modal::hide",this.onCloseModalContentHandler),this.$root.$off("payment::start",this.onOpenModalContentHandler),this.$root.$off("payment::end",this.onCloseModalContentHandler),this.$root.$off("modal::tips::close",this.onCloseModalContentHandler)},methods:M(M(M(M({},Object(c["Qb"])(["like","unlike","comment"])),Object(c["R"])(["setReportType"])),Object(c["yc"])(["setModalUser"])),{},{onOpenModalContentHandler:function(){this.openModalContent=!0,this.pauseStory()},onCloseModalContentHandler:function(){var t=this;this.openModalContent=!1,this.$nextTick((function(){t.playStory()}))},menuShow:function(){this.openMenu=!0,this.pauseStory()},menuHide:function(){var t=this;setTimeout((function(){t.openMenu=!1,t.openModalContent||t.$nextTick((function(){t.playStory()}))}))},onBlur:function(){var t=this;setTimeout((function(){t.showComment=!1,t.openModalContent||t.$nextTick((function(){t.playStory()}))}),200)},openReportModal:function(){var t=this;this.$refs.postDropdown.hide(),this.setReportType({type:"story",postId:this.currentStory.id}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalReport")}))},showCommentForm:function(){var t=this;this.showComment||(this.pauseStory(),this.showComment=!0,this.$nextTick((function(){t.$refs.commentInput.focus()})))},submitComment:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.disabledComment){t.next=2;break}return t.abrupt("return");case 2:return this.disabledComment=!0,t.next=5,this.comment({id:this.realStoryId,userId:this.userId,text:this.commentText});case 5:e=t.sent,e&&(this.$router.push({name:"Chat",params:{chatId:this.userId}}),this.close()),this.disabledComment=!1,this.showComment=!1,this.commentText="";case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showTipsForm:function(){var t=this;this.pauseStory(),this.setModalUser({userId:this.userId,storyId:this.realStoryId}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalTips")}))},likeHandle:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.disabledLike){t.next=2;break}return t.abrupt("return");case 2:return this.disabledLike=!0,e=this.isLiked?this.unlike:this.like,t.next=6,e({type:this.type,id:this.currentStory.id,userId:this.userId});case 6:this.disabledLike=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},R=A,D=Object(b["a"])(R,j,P,!1,null,null,null),F=D.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"story-viewer",class:{"m-viewing":"hold"!==t.status,"m-muted":t.shouldVideoBeMuted,"m-with-back-button":!1,"m-loading":"loading"===t.status,"m-paused":"paused"===t.status}},["loading"===t.status?i("spinner-loader",{staticClass:"m-lg-size"}):t._e(),i("div",{staticClass:"b-story-header"},[i("div",{staticClass:"b-story-header__author"},[i("avatar",{staticClass:"m-border-line m-absolute",attrs:{"user-id":t.user.id,"is-link":"","disable-story-functionality":""},nativeOn:{click:function(e){return t.goToProfile(e)}}}),i("div",{staticClass:"b-story-header__author__title"},[i("span",{on:{click:t.goToProfile}},[t._v(t._s(t.user.name))]),"paused"===t.status?i("span",{staticClass:"b-story-state"},[t._v(" "+t._s(t.$t("message.paused_label"))+" ")]):t._e()]),i("div",{staticClass:"b-story-header__author__subtitle"},[t._v(" "+t._s(t.timeAgo(t.get(t.storyItems,[t.currentStoryIndex,"time"],"")))+" ")])],1),i("button",{staticClass:"b-modal__close m-with-round-hover light",attrs:{type:"button",tabindex:"2"},on:{click:t.closeStory}},[i("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",attrs:{"extra-class":"m-aligned-top"}})])]),i("div",{staticClass:"slides-pointers",class:{"m-big-items-count":"sm"===t.$mq&&t.storyItems.length>15&&t.storyItems.length<=40,"m-huge-items-count":"sm"===t.$mq&&t.storyItems.length>40}},t._l(t.storyItems,(function(e,r){return i("span",{key:e.id,staticClass:"slides-pointers__item",class:{"m-seen":r<t.currentStoryIndex,"m-active":e.id===t.get(t.storyItems,[t.currentStoryIndex,"id"],"")},attrs:{"data-index":r,"data-item-id":e.id},on:{click:function(e){return t.goToSpecific(r)}}},[r===t.currentStoryIndex?i("em",{staticClass:"slides-pointers__item__progress",style:{width:t.percent+"%"}}):i("b",{staticClass:"slides-pointers__item__progress"})])})),0),i("div",{staticClass:"b-stories-slides"},[i("div",{staticClass:"b-stories-slides__item m-active",class:{seen:t.get(t.storyItems,[t.currentStoryIndex,"seen"],"")}},[t.get(t.storyItems,[t.currentStoryIndex,"isReady"])?"photo"===t.get(t.storyItems,[t.currentStoryIndex,"type"],"")?[!t.updating&&t.get(t.storyItems,[t.currentStoryIndex,"loadingBg"])?i("img",{ref:"imageBg",staticClass:"b-stories-slides__media-bg",attrs:{src:t.get(t.storyItems,[t.currentStoryIndex,"loadingBg"]),width:t.get(t.storyItems,[t.currentStoryIndex,"bgPreviewWidth"])+"px",height:t.get(t.storyItems,[t.currentStoryIndex,"bgPreviewHeight"])+"px",alt:""}}):t._e(),i("img",{ref:"image",staticClass:"b-stories-slides__media",style:t.imageStyles,attrs:{src:t.get(t.storyItems,[t.currentStoryIndex,"src"],""),width:t.get(t.storyItems,[t.currentStoryIndex,"bgPreviewWidth"])+"px",height:t.get(t.storyItems,[t.currentStoryIndex,"bgPreviewHeight"])+"px",alt:""}})]:[!t.updating&&t.get(t.storyItems,[t.currentStoryIndex,"loadingBg"])?i("img",{staticClass:"b-stories-slides__media-bg",attrs:{src:t.get(t.storyItems,[t.currentStoryIndex,"loadingBg"]),width:t.get(t.storyItems,[t.currentStoryIndex,"bgPreviewWidth"])+"px",height:t.get(t.storyItems,[t.currentStoryIndex,"bgPreviewHeight"])+"px",alt:""}}):t._e(),i("video",{ref:"video",staticClass:"b-stories-slides__media",attrs:{"data-length":t.get(t.storyItems[(t.currentStoryIndex,"length")],""),"webkit-playsinline":"",playsinline:"",preload:"auto",src:t.get(t.storyItems,[t.currentStoryIndex,"src"],""),loop:t.get(t.storyItems,[t.currentStoryIndex,"loop"],null)},domProps:{muted:t.shouldVideoBeMuted}})]:[i("div",{staticClass:"b-stories-slides__processing"},[t._v(" "+t._s(t.$t("message.media_currently_processing"))+" ")])],i("a",{staticClass:"tip link",attrs:{href:t.get(t.storyItems,[t.currentStoryIndex,"link"],""),rel:"noopener",target:"_blank"}})],2)])],1)},N=[],L=i("e528"),H={components:{SpinnerLoader:L["a"],Avatar:S["a"]},props:{shouldVideoBeMuted:{type:Boolean,required:!0},status:{type:String,required:!0},user:{type:Object,required:!0},storyItems:{type:Array,required:!0},closeStory:{type:Function,required:!0},percent:{type:Number,required:!0},currentStoryIndex:{type:Number,required:!0},goToProfile:{type:Function,required:!0},goToSpecific:{type:Function,required:!0},realStoryId:{type:[Number,String],required:!0}},data:function(){return{updating:!1}},computed:{language:function(){return{unmute:"Touch to unmute",keyboardTip:"Press space to see next",visitLink:"Visit link",time:{ago:"ago",hour:"hour ago",hours:"hours ago",minute:"minute ago",minutes:"minutes ago",fromnow:"from now",seconds:"seconds ago",yesterday:"yesterday",tomorrow:"tomorrow",days:"days ago"}}},imageStyles:function(){return"loading"===this.status?{opacity:0}:null}},watch:{realStoryId:function(){var t=this;this.updating=!0,setTimeout((function(){t.updating=!1}),33)}},methods:{get:a["get"],timeAgo:function(t){if(t){t=1e3*Number(t);var e=new Date(t),i=e.getTime(),r=((new Date).getTime()-i)/1e3,n=this.language.time,o=[[60," ".concat(n.seconds),1],[120,"1 ".concat(n.minute),""],[3600," ".concat(n.minutes),60],[7200,"1 ".concat(n.hour),""],[86400," ".concat(n.hours),3600],[172800," ".concat(n.yesterday),""],[604800," ".concat(n.days),86400]],s=1;r<0&&(r=Math.abs(r),s=2);var a=0,c=void 0;while(c=o[a++])if(r<c[0])return"string"===typeof c[2]?c[s]:Math.floor(r/c[2])+c[1];var u=e.getDate(),l=e.getMonth(),d=e.getFullYear();return"".concat(u,"/").concat(l+1,"/").concat(d)}}}},B=H,V=Object(b["a"])(B,T,N,!1,null,null,null),z=V.exports,U=i("86d6"),q=i("4ead"),W=i("ad4d");function G(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function K(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?G(Object(i),!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var X={components:{Item:z,Question:U["a"]},mixins:[q["a"]],data:function(){return{options:{openEffect:!0,backNative:!1,skin:"Snapgram",autoFullScreen:!1,avatars:!0,paginationArrows:!1,list:!0,cubeEffect:!0,localStorage:!1,previousTap:!0},pressTimer:null,TIMEOUT:300,showModalContent:!1,currentUserIndex:0,currentStoryIndex:0,status:"loading",shouldVideoBeMuted:!0,percent:0,stories:[],initialSlide:0,type:"userStories",isOpenCommentForm:!1,isOpenModalContent:!1,isOpenMenuContent:!1,currentHighlights:{},callback:void 0,questionOnFocus:!1,action:void 0}},computed:K(K(K(K({},Object(c["b"])(["authUser"])),Object(c["Rb"])(["userStories","isAllUserStoriesWatched"])),Object(c["u"])(["currentPlayAudio","currentPlayVideo"])),{},{swiperOptions:function(){var t=this,e="sm"===this.$mq?.5:.1;return{longSwipesRatio:e,effect:"cube",grabCursor:!0,cubeEffect:{shadow:!0,slideShadows:!0,shadowOffset:20,shadowScale:.94},initialSlide:this.initialSlide,on:{transitionStart:function(){t.pauseProgress()}}}},userId:function(){return this.isMine?this.authUser.id:Object(a["get"])(this,["currentUser","id"],0)},realStoryId:function(){return Object(a["get"])(this,["currentStory","id"],0)},panelComponent:function(){return this.isMine?E:F},currentUser:function(){return Object(a["get"])(this,["stories",this.currentUserIndex],{})},currentUserItems:function(){return Object(a["get"])(this,["currentUser","items"],[])},currentStory:function(){return Object(a["get"])(this,["currentUserItems",this.currentStoryIndex],{})},isReady:function(){return this.currentStory.isReady},isPhoto:function(){return"photo"===this.currentStory.type},isVideo:function(){return"video"===this.currentStory.type},mediaType:function(){return this.currentStory.mediaType},isMine:function(){return Object(a["get"])(this,["currentUser","isMine"])},title:function(){return this.currentStory?this.currentStory.title:""}}),watch:{currentUserIndex:function(){0===this.currentStoryIndex&&this.letsGo(),this.currentStoryIndex=0},currentStoryIndex:function(){this.letsGo()},percent:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e>=100&&this.nextStory(),!(e>0&&0===i)){t.next=9;break}if(this.currentStory.isWatched||!this.isReady){t.next=9;break}return t.next=5,this.watchStory({id:this.currentStory.id,type:this.type});case 5:r=t.sent,r&&r.success&&(this.currentStory.isWatched=!0),n=this.isAllUserStoriesWatched(this.currentUser.id,this.type),n&&this.setUserField({userId:this.currentUser.id,field:"hasNotViewedStory",status:!1});case 9:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),stories:function(){var t=this;this.$nextTick((function(){t.letsGo()}))},$route:function(t){var e=t.name;"PaymentsAddCard"===e&&this.closeStory()}},mounted:function(){this.$root.$on("component::story::run",this.runStoryHandler),this.$root.$on("show::story::stat",this.showStoryStatHandler),this.$root.$on("hide::story::stat",this.hideStoryStatHandler),this.$root.$on("bv::hide::modal::reportAbuse",this.closeStory),this.$root.$on("story::creation::upload::start",this.closeStory),this.$root.$on("story:modal:report",this.reportStory)},beforeDestroy:function(){this.$root.$off("component::story::run",this.runStoryHandler),this.$root.$off("show::story::stat",this.showStoryStatHandler),this.$root.$off("hide::story::stat",this.hideStoryStatHandler),this.$root.$off("bv::hide::modal::reportAbuse",this.closeStory),this.$root.$off("story::creation::upload::start",this.closeStory),this.$root.$off("story:modal:report",this.reportStory)},methods:K(K(K({},Object(c["yc"])(["setUserField"])),Object(c["Qb"])(["watchStory","removeMyStory","removeMyHighlights","sendAnswer","getAnswers"])),{},{get:a["get"],runStoryHandler:function(t){var e=this,i=t.stories,r=t.currentUserIndex,n=t.type,o=t.currentHighlights,s=t.action,a=t.callback;this.showModalContent=!0,document.documentElement.classList.add("m-disable-scrolling"),document.documentElement.classList.add("story-ran"),this.stories=i,this.type=n,this.currentUserIndex=r||0,this.initialSlide=r||0,this.currentHighlights=o,this.action=s,this.callback=a;var c=this.currentUserItems.findIndex((function(t){return!t.isWatched}));-1===c||o||this.$nextTick((function(){e.currentStoryIndex=c})),document.addEventListener("keyup",this.keyupHandler)},goToProfile:function(){var t=this.currentUser,e=t.username,i=t.name;(e||i)&&this.$router.push({name:"Profile",params:{userId:e||i}}),this.closeStory()},letsGo:function(){var t=this;this.$nextTick((function(){if(t.status="loading",t.percent=0,t.pausePlayMediaFromFeed(),t.isReady){if(t.isPhoto){var e=Object(a["get"])(t,["$refs","currentStorySetItem",t.currentUserIndex,"$refs","image"]);e&&(e.complete?t.startProgress():e.onload=function(){t.startProgress()})}else if(t.isVideo){var i=Object(a["get"])(t,["$refs","currentStorySetItem",t.currentUserIndex,"$refs","video"]);if(i){try{i.play()}catch(r){}i.onplaying=function(){t.startProgress()},i.onwaiting=function(){t.pauseProgress("loading")}}}}else t.startProgress()}))},closeStory:function(){var t=this;this.stories=[],this.currentUserIndex=0,this.currentStoryIndex=0,this.initialSlide=0,this.status="loading",this.percent=0,this.type="userStories",this.isOpenCommentForm=!1,this.isOpenModalContent=!1,this.isOpenMenuContent=!1,this.currentHighlights={},this.action=void 0,document.removeEventListener("keyup",this.keyupHandler),document.documentElement.classList.remove("m-disable-scrolling"),document.documentElement.classList.remove("story-ran"),this.callback&&"function"===typeof this.callback&&(this.callback(),this.callback=void 0),this.$root.$emit("component::story::close"),setTimeout((function(){t.showModalContent=!1}),W["a"]?300:0)},onSlideChange:function(){var t=this.$refs.slider.swiperInstance.activeIndex;this.currentUserIndex=t},prevStory:function(){this.action=void 0,this.currentStoryIndex>0?this.currentStoryIndex-=1:this.currentUserIndex>0?this.$refs.slider.swiperInstance.slidePrev(1e3):this.closeStory()},nextStory:function(){var t=this.currentUserItems.length,e=(this.stories||[]).length,i=this.currentStoryIndex===t-1,r=this.currentUserIndex===e-1;this.action=void 0,i&&r?this.closeStory():i?this.$refs.slider.swiperInstance.slideNext(500):this.currentStoryIndex+=1},goToSpecific:function(t){this.isOpenCommentForm=!1,this.isOpenModalContent=!1,this.isOpenMenuContent=!1,this.currentStoryIndex=t,this.action=void 0},keyupHandler:function(t){t.preventDefault(),t.stopPropagation();var e=t.keyCode,i=Object(a["get"])(t,"target.nodeName","");"INPUT"!==i&&"TEXTAREA"!==i&&(27===e?this.closeStory():32===e&&this.nextStory())},unmuteVideoItem:function(){var t=Object(a["get"])(this,["$refs","currentStorySetItem",this.currentUserIndex,"$refs","video"]);if(t){this.shouldVideoBeMuted=!1,t.muted=!1,t.volume=1,t.removeAttribute("muted");try{t.play().catch((function(){}))}catch(e){}if(t.paused){t.muted=!0;try{t.play().catch((function(){}))}catch(i){}}}},longClickStartHandler:function(){this.pauseProgress(void 0,!0)},longClickStopHandler:function(){this.startProgress()},touchStartHandler:function(t){t.target.closest(".l-stories")&&("click"===t.type&&0!==t.button||null===this.pressTimer&&(this.pressTimer=setTimeout(this.longClickStartHandler,this.TIMEOUT)))},touchEndHandler:function(t){t.target.closest(".l-stories")&&(null!==this.pressTimer&&(clearTimeout(this.pressTimer),this.pressTimer=null),this.simpleClickHandler(t))},simpleClickHandler:function(t){var e=this;if("paused"!==this.status){var i=W["a"]&&t.changedTouches?t.changedTouches[0]:t,r=i.pageX,n=i.pageY;if(void 0!==r&&void 0!==n){var o=80,s=o,a=window.innerHeight-o,c=.45*window.innerWidth,u=.55*window.innerWidth;n<s||n>a||(r<c?this.prevStory():r>u&&this.nextStory())}}else this.$nextTick((function(){e.longClickStopHandler()}))},startProgress:function(){if(!this.isOpenCommentForm&&!this.questionOnFocus&&!this.isOpenModalContent&&!this.isOpenMenuContent&&(this.status="viewing",this.tempTime=Date.now(),this.statusBarStep(),this.isReady)){var t=Object(a["get"])(this,["$refs","currentStorySetItem",this.currentUserIndex,"$refs","video"]);if(this.isVideo&&t&&t.paused)try{t.play().catch((function(){}))}catch(e){}}},statusBarStep:function(){var t=this;if("viewing"===this.status){if(this.isPhoto){var e=this.percent+(Date.now()-this.tempTime)/(10*this.currentStory.length);this.percent=e>=100?100:e}if(this.isVideo){var i=Object(a["get"])(this,["$refs","currentStorySetItem",this.currentUserIndex,"$refs","video"]);if(i){var r=i.duration<5?5:i.duration,n=i.duration<5,o=n?this.percent+(Date.now()-this.tempTime)/(10*this.currentStory.length)||0:Math.round(i.currentTime/r*100);this.percent=o>=100?100:o}}this.tempTime=Date.now(),setTimeout((function(){t.statusBarStep()}),1e3/24)}},pauseProgress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"paused";this.status=t;var e=Object(a["get"])(this,["$refs","currentStorySetItem",this.currentUserIndex,"$refs","video"]);this.isVideo&&e&&this.isVideoPlaying()&&e.pause()},isVideoPlaying:function(){var t=Object(a["get"])(this,["$refs","currentStorySetItem",this.currentUserIndex,"$refs","video"]);return!(!this.isVideo||!t)&&!!(t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2)},removeStory:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.currentStory,i=e.id,r=e.isReady,r||"string"!==typeof i||this.$root.$emit("story::creation::upload::cancel",i),t.next=4,this.removeMyStory(i);case 4:this.closeStory();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeHighlight:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.removeMyHighlights(this.currentHighlights.id);case 2:this.closeStory();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showStats:function(t){this.$root.$emit("show::story::stat",{stories:this.currentUser,initialSlide:this.currentStoryIndex,param:t})},editHighlight:function(){var t=this;this.$root.$emit("show-create-highlight-modal",{isEdit:!0,currentHighlights:this.currentHighlights}),this.$nextTick((function(){t.closeStory()}))},sendStoryAnswer:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.sendAnswer({storyId:this.realStoryId,text:e});case 2:i=t.sent,r=i.status?this.$t("message.your_answer_has_been_sent"):i.errorText||this.$t("message.chat_message_sending_error_undefined"),this.$bvToast.toast(r,{autoHideDelay:3e3,appendToast:!0,toaster:"b-toaster-bottom-left ".concat(i.status?"":"b-toaster-error")});case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),pausePlayMediaFromFeed:function(){this.currentPlayAudio&&this.$root.$emit("pausePlayerAudio",this.currentPlayAudio),this.currentPlayVideo&&this.$root.$emit("pausePlayerVideo",this.currentPlayVideo)},reportStory:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.id,r=void 0===i?0:i,this.currentUserItems.length){t.next=3;break}return t.abrupt("return");case 3:if(!Object(a["isEmpty"])(this.currentUser)){t.next=5;break}return t.abrupt("return");case 5:if(this.stories[this.currentUserIndex].items=this.currentUserItems.filter((function(t){return t.id!==r})),this.stories[this.currentUserIndex].items.length){t.next=9;break}return this.closeStory(),t.abrupt("return");case 9:Object(a["isEmpty"])(this.currentStory)?(this.currentStoryIndex>0&&(this.currentStoryIndex-=1),this.nextStory()):this.$nextTick((function(){n.pauseProgress(),n.percent=0===n.currentStoryIndex?0:(n.currentStoryIndex-1)/n.currentUserItems.length*100,n.startProgress()}));case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),showStoryStatHandler:function(){this.pauseProgress(),this.isOpenModalContent=!0},hideStoryStatHandler:function(t){var e=t.isCloseStory;this.isOpenModalContent=!1,e?this.closeStory():this.startProgress()}})},Q=X,Y=Object(b["a"])(Q,r,n,!1,null,null,null);e["default"]=Y.exports},c37b:function(t,e,i){"use strict";i("f29ea")},c41d:function(t,e,i){},c618:function(t,e,i){"use strict";i("3251")},d5ea:function(t,e,i){},dd8e:function(t,e,i){"use strict";i("7788")},f29ea:function(t,e,i){},fd00:function(t,e,i){}}]);